<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>LeetCode 1687. Delivering Boxes from Storage to Ports</title>
    <url>/2022/09/01/1687.delivering-boxes-from-storage-to-ports/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="Analyse"><a href="#Analyse" class="headerlink" title="Analyse"></a>Analyse</h2><p>As the dynamic programming solutionâ€™s max time complexity is $\text O(n^2)$. We could simply get the first solution:<br>This Code comes from <a href="https://leetcode.com/linshan007/">linshan077</a>. And it is almost the best implement of DP. Where the trip assist to decline the cost of repeatedly judging <code>boxes[j][0] == boxes[j-1][0]</code> and <code>dp</code> is the common implement of dynamic programming.</p>
<pre class=" language-C++"><code class="language-C++">class Solution1 &#123;
public:
    int boxDelivering(vector<vector<int>>& boxes, int portsCount, int maxBoxes, int maxWeight) &#123;
        vector<int> trips(boxes.size());
        trips[0] = 0;
        for (int i = 1; i < boxes.size(); ++i) &#123;
            if (boxes[i][0] == boxes[i-1][0]) &#123;
                trips[i] = trips[i-1];
            &#125; else &#123;
                trips[i] = trips[i-1]+1;
            &#125;
        &#125;
        // dp[i+1] is minimum trips assuming i is the last box to deliver and will return to port afterwards. 
        vector<int> dp(boxes.size()+1);
        dp[0] = 0;
        for (int i = 0; i < boxes.size(); ++i) &#123;
            dp[i+1] = INT_MAX;
            int sum_weights = 0;
            for (int j = i; j>=0 && i-j+1 <= maxBoxes; --j) &#123;
                sum_weights += boxes[j][1];
                if (sum_weights > maxWeight) break;
                dp[i+1] = std::min(dp[i+1], dp[j]+2+trips[i]-trips[j]);
            &#125;
        &#125;
        return dp.back();
    &#125;
&#125;;
</code></pre>
<p>However, it got a TLE.  And we translate<code>min(dp[j]+2+trips[i]-trips[j])</code> into <code>2+trips[i]+min(dp[j]-trips[j])</code>. It turns to a question: find the minimum in a Slide window(Which we can easily solve by a deque with total time complexity $\text O(n)$).</p>
<pre class=" language-C++"><code class="language-C++">class Solution2 &#123;
public:
    int boxDelivering(vector<vector<int>>& boxes, int portsCount, int maxBoxes, int maxWeight) &#123;
        vector<int> trips(boxes.size());
        trips[0] = 0;
        for (int i = 1; i < boxes.size(); ++i) &#123;
            if (boxes[i][0] == boxes[i-1][0]) &#123;
                trips[i] = trips[i-1];
            &#125; else &#123;
                trips[i] = trips[i-1]+1;
            &#125;
        &#125;
        vector<long int> weights(boxes.size()+1);
        weights[0] = 0;
        for (int i = 0; i < boxes.size(); ++i) &#123;
            weights[i+1] = weights[i]+boxes[i][1];
        &#125;
        vector<int> dp(boxes.size()+1);
        dp[0] = 0;
        vector<long> weight(boxes.size()+1);
        weight[0] = 0;
        for(int i = 1; i != boxes.size()+1; ++i)
            weight[i] = weight[i-1] + boxes[i-1][1];
        deque<pair<int,int>> dq;
        int temp, totalWeight, totalBoxes;
        int j = 0;
        dq.push_back(&#123;0,dp[0] - trips[0]&#125;);
        dp[1] = 2 + trips[0] + dq.front().second;
        for (int i = 1; i < boxes.size(); ++i) &#123;
            temp = dp[i] - trips[i];
            while (!dq.empty() && dq.back().second > temp)
                dq.pop_back();
            dq.push_back(&#123;i,temp&#125;);
            totalWeight = weight[i+1] - weight[j];
            totalBoxes = i - j + 1;
            while (totalWeight > maxWeight || totalBoxes > maxBoxes)&#123;
                dq.pop_front();
                j = dq.front().first;
                totalWeight = weight[i+1] - weight[j];
                totalBoxes = i - j + 1;
            &#125;
            dp[i+1] = 2 + trips[i] + dq.front().second;
        &#125;
        return dp.back();
    &#125;
&#125;;
</code></pre>
<p>The above code deducts the cost of  repetitive calculation of <code>dp[i+1] = std::min(dp[i+1], dp[j]+2+trips[i]-trips[j])</code> And turns $\text O(mn)$(where m is the maxBoxes) into $\text O(n) + \text O(n) &#x3D; \text O(n)$.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="https://leetcode.com/problems/delivering-boxes-from-storage-to-ports/discuss/1369248/C%2B%2B-DP-solution-with-thinking-process%3A-brute-force-greater-priority-queue-greater-mono-queue">C++ DP solution with thinking process: brute force -&gt; priority queue -&gt; mono queue</a></li>
<li><a href="https://leetcode.com/problems/delivering-boxes-from-storage-to-ports/discuss/2330389/Java-or-From-O(N2)-to-O(N)-or-MonoQueue-w-DP">Java | From O(N^2) to O(N) | MonoQueue w&#x2F; DP</a></li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>LeetCodeç¬”è®°</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>Algorithms</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode 188. Best Time to Buy and Sell Stock IV</title>
    <url>/2022/09/10/188.best-time-to-buy-and-sell-stock-iv/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="Analyse"><a href="#Analyse" class="headerlink" title="Analyse"></a>Analyse</h2><p>This is another dynamic programming problem similar to <a href="https://jzy-planet.com/2022/09/01/1687.delivering-boxes-from-storage-to-ports/">1687. Delivering Boxes from Storage to Ports</a>. And however, with a limitation of purchase times. We can just use two iteration on this question. One is the iteration of vector prices(conspicuously), and another is the iteration of purchase times k.<br>Whatâ€™s more, we need to purchase a good before selling it. Thus we need to record the purchases. And the code is as below</p>
<pre class=" language-C++"><code class="language-C++">class Solution &#123;
public:
    int maxProfit(int k, vector<int>& price) &#123;
        vector<int> profit(2*k+1, INT_MIN);
        //if we do nothing, the profit is 0 without doubt
        profit[0] = 0;

        //the iteration of prices vector
        for(int j = 0; j < price.size(); j++) &#123;
            //the iteration of transaction times
            /*for each i, profit[i+1] is the profit with a good in stock,
             *and profit[i+2] is the profit after selling goods.
             */
            for(int i = 0; i+2 <= 2*k; i += 2)&#123;
                profit[i+1] = max(profit[i+1], profit[i]-price[j]);
                profit[i+2] = max(profit[i+2], profit[i+1]+price[j]);
            &#125;
        &#125;
        return *max_element(profit.begin(), profit.end());
    &#125;
&#125;;
</code></pre>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://jzy-planet.com/2022/09/01/1687.delivering-boxes-from-storage-to-ports/">1687. Delivering Boxes from Storage to Ports</a><br><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/discuss/2555708/Easy-solution-Explained-oror-Beginner-Friendly-oror-Best-Method">âœ…Easy solution Explained || Beginner Friendly ğŸ”¥||âœ”ï¸ Best Method</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>LeetCodeç¬”è®°</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>Algorithms</tag>
      </tags>
  </entry>
  <entry>
    <title>å†å‘¨è®°(2022-08-29 - 2022-09-04)</title>
    <url>/2022/09/04/2022-w35/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>è¿™æ˜¯æˆ‘åœ¨åšå®¢ä¸Šå†™çš„ç¬¬ä¸€ç¯‡å‘¨è®°ï¼Œå¸Œæœ›èƒ½ç”¨å‘¨è®°çš„å½¢å¼æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»å’Œä¸€äº›æ„Ÿæ‚Ÿã€‚ä¹Ÿèƒ½ç”¨è¾“å‡ºå€’é€¼è¾“å…¥çš„æ–¹å¼è®©è‡ªå·±å»æ›´å¤šåœ°æ¶‰çŒä¸€äº›å†…å®¹ã€‚æˆ‘å§‹ç»ˆè§‰å¾—æ–‡ç†ç§‘å¹¶ä¸æ˜¯äººç”Ÿå¿…é¡»äºŒé€‰ä¸€çš„é€‰é¡¹ï¼Œä¸€ä¸ªç¨‹åºå·¥ç¨‹å¸ˆåŒæ ·éœ€è¦äººæ–‡æƒ…æ€€å’Œäººæ–‡ç´ å…»ï¼Œæ‰èƒ½æ›´å¥½åœ°å¼€å‘å‡ºå¸å¼•å’Œæ»¡è¶³ä»–äººè¯‰æ±‚çš„äº§å“ã€‚<br>æˆ‘åœ¨ä¸Šä¸€å‘¨ï¼Œä¹ƒè‡³è¿‡å»çš„ä¸€ä¸ªæœˆæ¯å¤©æ™šä¸Šéƒ½ä¹ æƒ¯æ€§åœ°å¼€å§‹å†™ä»£ç ï¼Œä¸€ç›´ç†¬åˆ°æ·±å¤œè§£å†³é—®é¢˜æ‰ä¸ŠåºŠã€‚ç„¶åè¢«è“å…‰è¾å°„åœ°æ¯«æ— å›°æ„ï¼Œæ‰“å¼€ç¤¾äº¤åª’ä½“åˆ·åˆ·åˆ·ï¼Œä¸€ç›´åˆ·åˆ°æ˜æ˜æ²‰æ²‰åœ°ç¡å»ã€‚ç¬¬äºŒå¤©è¢«é—¹é“ƒå«é†’ï¼Œä¹Ÿæ‰å ªå ªç¡å¤Ÿå…­ä¸ªå°æ—¶ã€‚æ—¶é—´ä¸€é•¿ï¼Œç”Ÿç‰©é’Ÿå°±å½»åº•ä¹±æ‰äº†ï¼Œæˆ‘å¼€å§‹é—´æ­‡æ€§å—œç¡ã€æ„Ÿå†’æµæ¶•ä¸æ­¢ï¼Œæ¯æ—¥è·‘æ­¥ä¹Ÿæ„Ÿè§‰è·‘ä¸åŠ¨äº†ã€‚è¿™è®©æˆ‘å¼€å§‹æ€è€ƒä¸€ä¸ªWLB(Work&amp;Life Balance) çš„é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æœ¬æ¬¡å‘¨è®°çš„è¯é¢˜ã€‚</p>
<h2 id="å¦‚ä½•çœ‹å¾…-WLB"><a href="#å¦‚ä½•çœ‹å¾…-WLB" class="headerlink" title="å¦‚ä½•çœ‹å¾… WLB"></a>å¦‚ä½•çœ‹å¾… WLB</h2><p>å¯¹è®¸å¤šå¤§å­¦å­¦ç”Ÿè€Œè¨€ï¼Œæˆ‘ä»¬å¯¹ WLB å…¶å®ç¼ºä¹æ¸…æ™°çš„è®¤çŸ¥ã€‚ä¸€æ–¹é¢ï¼Œå­¦ç”Ÿï¼Œå°¤å…¶æ˜¯å¤§å­¦ç”Ÿï¼Œå¹¶æ²¡æœ‰ä¸¥æ ¼çš„å·¥ä½œä¸æ—¶é—´çš„ç•Œé™ã€‚å‡ºäºä¸ªäººè§„åˆ’ä¸ç›®æ ‡çš„ä¸åŒï¼Œæ—¥æ—¥åˆ·å›¾ä¹¦é¦†è€…æœ‰ä¹‹ï¼Œçˆ†è‚åšé¡¹ç›®è€…æœ‰ä¹‹ï¼Œæ¯å¤©æ‘¸é±¼ç›´åˆ°è€ƒè¯•å‘¨ç†¬å¤œè¡¥å¤©è€…äº¦æœ‰ä¹‹ã€‚  å¦ä¸€æ–¹é¢ï¼Œå­¦ç”Ÿçš„å·¥ä½œæ—¶é—´å¾€å¾€ä¸æ€ä¹ˆå—åˆ°é‡è§†ï¼ˆå› ä¸ºå¤§å­¦ç”Ÿæ˜¯æå¥½çš„å»‰ä»·åŠ³åŠ¨åŠ›ï¼‰ï¼Œæ—¶å¸¸æ˜¯å¬ä¹‹å³æ¥æŒ¥ä¹‹å³å»ï¼Œè¿™ä¹Ÿå¯¼è‡´å­¦ç”Ÿçš„å·¥ä½œ&#x2F;å­¦ä¹ æ—¶é—´æä¸å›ºå®šã€‚<br>è¿™ç§å¤§å­¦ç”Ÿæ´»è™½ç»™äº†æˆ‘ä»¬æå¤§çš„è‡ªç”±ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚æ¥åˆ†é…æ—¶é—´ï¼Œä½†æˆ‘è®¤ä¸ºåœ¨æŸç§ç¨‹åº¦ä¸Šè¿™å¹¶ä¸æ˜¯ä¸€ç§å¥½äº‹ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬éœ€è¦å…»æˆå¯¹â€œå·¥ä½œâ€çš„æ¦‚å¿µï¼Œæ‰¾åˆ°è‡ªå·±è®¤å¯çš„ï¼Œèƒ½å¤Ÿå®ç°è‡ªæˆ‘ä»·å€¼çš„äº‹ä¸šï¼Œç„¶åä¸æ–­ç²¾è¿›â€”â€”æ³¨æ„ï¼Œè¿™é‡Œéœ€è¦çš„æ˜¯ä¸€ç§è‡ªå‘è€Œè‡ªè§‰çš„å·¥ä½œï¼›å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æŒæ¡è°ƒå‰‚å·¥ä½œä¸ç”Ÿæ´»çš„è‰ºæœ¯ï¼Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„å·¥ä½œèŠ‚å¥å’Œäº«å—ç”Ÿæ´»çš„æ€åº¦ã€‚ä»è¿™ç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå…«å°æ—¶å·¥ä½œåˆ¶æ˜¯ä¸€ç§å¾ˆå€¼å¾—å€Ÿé‰´çš„ç”Ÿæ´»æ–¹å¼â€”â€”æ¯æ—¥ç»™å·¥ä½œç•™è¶³ä¸€å®šçš„æ—¶é—´ï¼Œå‰©ä¸‹çš„æ—¶é—´ç”¨äºäº«å—ç”Ÿæ´»ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºå‘å±•å…´è¶£ã€æ¢ç´¢ä¸åŒäºæ—¥å¸¸å·¥ä½œçš„ï¼Œå¯ä»¥æå‡è‡ªå·±çš„é‚£ä¸€éƒ¨åˆ†ï¼‰ï¼Œæ€»ä¹‹ï¼Œä¸å·¥ä½œä¿ç•™å‡ºè¶³å¤Ÿçš„è·ç¦»ã€‚ä»¥å…è¿‡å¿«åœ°æ¶ˆè€—è‡ªå·±çš„æ¿€æƒ…å’Œå‘å±•æ½œåŠ›ã€‚<br>åœ¨ä¸¤å¤©å‰ï¼Œæˆ‘ç»ˆäºå ªå ªè°ƒæ•´å¥½äº†è‡ªå·±çš„ç”Ÿç‰©é’Ÿï¼Œä¹Ÿè¿›ä¸€æ­¥è§„åˆ’å¥½äº†è‡ªå·±çš„å­¦ä¹ æ—¶é—´è¡¨ã€‚ä¸»è¦ä»»åŠ¡å°±æ˜¯æŠŠè‡ªå·±çš„ç¼–ç¨‹å’Œå­¦ä¹ è®¡ç®—æœºçŸ¥è¯†çš„æ´»åŠ¨è°ƒåˆ°ä¸‹åˆï¼Œä»¥å…è‡ªå·±æ²‰è¿·å­¦ä¹ æ— æ³•è‡ªæ‹”ï¼Œå†æ¬¡é™·å…¥ç†¬å¤œçš„ä¸è‰¯å¾ªç¯ä¸­å»ã€‚ä½†æ˜¯ç»ˆæç›®æ ‡ä»ç„¶æ˜¯åšæŒè‡ªå·±çš„æ—¶é—´è¡¨ï¼Œä¸è¦ä¸ºä»»åŠ¡æ‰€å›°ã€‚åˆ°ç‚¹åï¼Œè®°å½•å®Œè‡ªå·±çš„çŠ¶æ€å’Œtodo-listï¼Œç„¶åè¿…é€Ÿå›å½’ç”Ÿæ´»ã€‚ä¸è¦é™·å…¥å‘¨æœŸæ€§çš„<a href="https://asana.com/zh-tw/resources/parkinsons-law">å¸•é‡‘æ£®</a>å±æœºä¸­å»ã€‚</p>
<h2 id="æ—¶é—´å†—ä½™çš„æœ€å¤§æ€æ‰‹"><a href="#æ—¶é—´å†—ä½™çš„æœ€å¤§æ€æ‰‹" class="headerlink" title="æ—¶é—´å†—ä½™çš„æœ€å¤§æ€æ‰‹"></a>æ—¶é—´å†—ä½™çš„æœ€å¤§æ€æ‰‹</h2><p>è¯¥æ¡å¼•è‡ª<a href="https://twitter.com/Svwang1">ç¡…è°·ç‹å·</a>çš„æ¨ç‰¹ï¼š</p>
<blockquote>
<p>æœ€é‡è¦çš„ä¸€ä¸ªå†—ä½™æ˜¯æ—¶é—´å†—ä½™ï¼Œæœ‰å¤§æŠŠçš„é—²æš‡æ—¶é—´å»åšè‡ªå·±æ„¿æ„åšçš„äº‹æƒ…ï¼Œè€ŒæŠŠåœ¨ä¸æ„¿æ„åšçš„äº‹æƒ…ä¸Šè€—è´¹çš„æ—¶é—´å°½é‡å‹ç¼©åˆ°æ¥è¿‘äºé›¶ã€‚</p>
<p><strong>æ—¶é—´å†—ä½™çš„ç¬¬ä¸€ä¸ªæ€æ‰‹æ˜¯ï¼šæµªè´¹æ—¶é—´å»è¾©è®ºï¼Œæˆ–è¯•å›¾è¯´æœè®¤çŸ¥ä¸åŒçš„äººæ¥å—è‡ªå·±çš„è§‚ç‚¹ã€‚</strong>Â </p>
<p>æ—¶é—´å†—ä½™çš„ç¬¬äºŒä¸ªæ€æ‰‹ï¼Œæ˜¯æ²¡æœ‰æŠŠè‡ªå·±ç»å¸¸è¦åšçš„ä¸€äº›äº‹æƒ…è‡ªåŠ¨åŒ–ï¼Œç„¶åå‘ç°è‡ªå·±å¿˜äº†ï¼Œåˆè¦è€—è´¹æ—¶é—´ç²¾åŠ›å†äººå·¥å¹²é¢„ã€‚Â </p>
<p>æ—¶é—´å†—ä½™çš„ç¬¬ä¸‰ä¸ªæ€æ‰‹ï¼Œ<strong>æ˜¯æ²¡æœ‰æ³¨é‡äºå¯ä»¥ä¸æ–­å¤šæ¬¡é‡å¤ä½¿ç”¨ï¼Œç§¯ç´¯çš„è¡Œä¸ºï¼›è€Œè€—è´¹å¤§é‡ç²¾åŠ›åœ¨ä½ä»·å€¼ï¼Œæ— æ³•é‡å¤åˆ©ç”¨çš„è¡ŒåŠ¨ä¸Šã€‚</strong>Â </p>
<p>æ—¶é—´å†—ä½™çš„ç¬¬å››ä¸ªæ€æ‰‹ï¼Œæ˜¯æ²¡æœ‰å‹‡æ°”å’Œæ„æ„¿éš”æ–­å„ç§ä½æ•ˆç”šè‡³æœ‰ä¼¤å®³æ€§çš„ç¤¾äº¤åº”é…¬ï¼Œè®©ä¸€äº› sb éšä¾¿çš„æ¥è¿‘ä½ çš„ç©ºé—´ï¼Œæˆ–è€…å…è®¸ä¸€äº›ç¾¤ä½“çš„é”™è¯¯é£æ°”æ½œç§»é»˜åŒ–çš„å¹²æ‰°ä½ çš„ç‹¬ç«‹æ€è€ƒã€‚Â </p>
<p>æ—¶é—´å†—ä½™çš„ç¬¬äº”ä¸ªæ€æ‰‹ï¼Œæ˜¯æ²¡æœ‰æ³¨æ„â€œèŠ‚åˆ¶é¥®é£Ÿ - é€‚åº¦è¿åŠ¨ - å……è¶³ç¡çœ â€, éšç€å¹´é¾„å¢é•¿ï¼Œå„ç§è‚©é…¸èƒŒç—›ï¼Œè§†åŠ›ä¸‹é™ï¼Œç¥ç»è¡°å¼±ï¼Œé«˜è¡€ç³–è¡€è„‚ï¼Œå¿ƒè¡€ç®¡ç­‰æ¯›ç—…ä¸æ–­åŠ å‰§ï¼Œæ¶æ€§å¾ªç¯ï¼Œè„¾æ°”ä¹Ÿè¶Šå‘æš´æˆ¾ï¼Œè¿…é€Ÿæ»‘å‘è€å¹´ç—´å‘†ï¼Œæˆäº†ä¸€ä¸ªäº‹å®ä¸Šçš„åºŸäººã€‚Â </p>
<p>æ—¶é—´å†—ä½™çš„ç¬¬å…­ä¸ªæ€æ‰‹ï¼Œæ˜¯æœ¬æ¥å¯ä»¥èŠ± N å°æ—¶æŠŠä¸€ä¸ªäº‹æƒ…åšå¾—å·®ä¸å¤šè¶³å¤Ÿå¥½å°±æ”¶æ‰‹äº†ï¼Œç¡¬æ˜¯è¦èŠ± 3N, 4N ç”šè‡³æ›´å¤šå€çš„æ—¶é—´ï¼Œä»…ä»…æŠŠæ•ˆç›Šå†æé«˜ç™¾åˆ†ä¹‹å‡ è€Œå·²ï¼Œç”šè‡³ç”»è›‡æ·»è¶³ï¼Œå¤šä½™çš„åŠªåŠ›åè€ŒæŠŠäº‹æƒ…æç ¸äº†ã€‚Â </p>
<p>åˆ¤æ–­è‡ªå·±â€æ—¶é—´å†—ä½™â€çš„æ°´å¹³çš„ä¸€ä¸ªè§’åº¦æ˜¯ï¼Œä½ å¦‚æœä»€ä¹ˆéƒ½ä¸åšï¼Œä¸€ä¸ªæœˆï¼Œä¸‰ä¸ªæœˆï¼Œç”šè‡³åƒ Rip Van Winkle ä¸€æ ·ç¡å¾ˆå¤šå¹´çš„è§‰å†é†’æ¥ï¼Œä½ çš„çŠ¶å†µ (è´¢åŠ¡æˆ–è€…åˆ«çš„æ–¹é¢) æ˜¯ä¸æ˜¯å¯ä»¥ç»´æŒç°çŠ¶ï¼Œç”šè‡³ä¼šå˜å¾—æ¯”ç°åœ¨æ›´å¥½? å¦‚æœæœ‰å“ªäº›åœ°æ–¹éœ€è¦äººå·¥å¹²é¢„ï¼Œæ˜¯å¦å¯ä»¥ç°åœ¨å°±æœªé›¨ç»¸ç¼ªï¼ŒæŠŠå®ƒé¢„å…ˆè‡ªåŠ¨è®¾ç½®å¥½ï¼ŸÂ </p>
<p>â€œæ—¶é—´å†—ä½™â€å¹¶ä¸å®Œå…¨ç­‰åŒäºâ€œé«˜æ•ˆç‡â€ï¼Œå¦ä¸€ä¸ªè§’åº¦æ˜¯å½“æ„è¯†åˆ°è‡ªå·±çš„æ–¹å‘æ˜¯é”™è¯¯çš„æ—¶å€™ï¼Œå¯ä»¥è¿…é€Ÿè°ƒæ•´çº é”™çš„èƒ½åŠ›ã€‚å¦‚æœæ–¹å‘é”™è¯¯ï¼Œæ„è¯†åˆ°é”™è¯¯åå› ä¸ºå„ç§é™åˆ¶è€Œæ— æ³•è¿…é€ŸæŠ½èº«ç¦»å¼€ï¼Œé‚£ä¹ˆä¸ç®¡æ•ˆç‡å¤šé«˜ï¼Œä¹Ÿæ˜¯æ‰ç„¶ã€‚Â </p>
<p>ä»»ä½•äº‹æƒ…ï¼Œå¦‚æœä¸èƒ½éšæ—¶æŠ½èº«ç¦»å»ï¼Œè€Œè¦æ—¶å¸¸äº‹å¿…èº¬äº²ï¼Œæ˜¯ä¸€ä¸ªæ½œåœ¨çš„æ—¶é—´ä¸Šçš„è´Ÿèµ„äº§ï¼Œæ˜¯å¯¹æ—¶é—´å†—ä½™çš„å·¨å¤§æŸå®³ã€‚å¾€å¾€ä¸€å¼€å§‹æ²¡æœ‰åœ¨æ„ï¼Œå‡ºäº†é—®é¢˜åæ‰æ„è¯†åˆ°ä»£ä»·å·¨å¤§ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¾€å¾€æ„è¯†ä¸åˆ°æ—¶é—´æ˜¯å¤šä¹ˆåœ°å®è´µï¼Œä»¥è‡´äºå°†å®ƒè½»æ·åˆ°é‚£äº›æ²¡æœ‰ä»·å€¼çš„åœ°æ–¹å»ï¼Œé™·å…¥æ— åº•çš„æ—¶é—´æ¼©æ¶¡æ— æ³•è‡ªæ‹”ã€‚æˆ‘éå¸¸è®¤å¯è¿™ä¸ªâ€œæ—¶é—´å†—ä½™â€çš„åšæ³•ï¼Œä»¥å‰ä¹ŸèŠ±äº†å¾ˆå¤šçš„ç»å†æ¥æ¢ç´¢â€œè‡ªåŠ¨åŒ–å·¥å…·æµâ€ã€‚ä½†è¿™æ®µè¯çš„ç¡®ç»™äº†æˆ‘æ›´å¤šçš„å¯ç¤ºï¼šå°†æ—¶é—´æµªè´¹åœ°ç”»åœ¨ä¸å€¼å¾—çš„åœ°æ–¹åŒæ ·æ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»ã€‚å¦‚æœå¿…é¡»æµªè´¹æ—¶é—´ï¼Œé‚£å°±å°†æ—¶é—´æµªè´¹ç»™è‡ªå·±å’Œè‡ªå·±çˆ±çš„äººèº«ä¸Šå§ã€‚è‹¥æ˜¯æ— è°“åœ°è™šæ·æ—¶é—´è€Œæƒ³è¦è·å¾—å¿«ä¹ï¼Œæ–¯ä»¥ä¼æ ¹è€Œæ±‚æœ¨èŒ‚ï¼Œå¡æºè€Œæ¬²æµé•¿ä¹Ÿã€‚</p>
]]></content>
      <categories>
        <category>éšç¬”</category>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>weekly journal</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ learning notes</title>
    <url>/2021/05/24/c-learning-notes/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="C-learning-notes"><a href="#C-learning-notes" class="headerlink" title="C++ learning notes"></a>C++ learning notes</h1><h2 id="Generic-algorithm"><a href="#Generic-algorithm" class="headerlink" title="Generic algorithm"></a>Generic algorithm</h2><h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h3><p>[capture list] (parameter list) -&gt; return type {function body}</p>
<p>we can ignore the <em>parameter list</em> and <em>return type</em>, but the <em>capture list</em> and the <em>function body</em> must be reserved</p>
<p>eg:</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> string <span class="token operator">&amp;</span>b<span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="dynamic-memory"><a href="#dynamic-memory" class="headerlink" title="dynamic memory"></a>dynamic memory</h2><h3 id="shared-ptr-lt-gt"><a href="#shared-ptr-lt-gt" class="headerlink" title="shared_ptr&lt;&gt;"></a>shared_ptr&lt;&gt;</h3><p>use function make_shared&lt;&gt;()</p>
<h3 id="unique-ptr-lt-gt"><a href="#unique-ptr-lt-gt" class="headerlink" title="unique_ptr&lt;&gt;"></a>unique_ptr&lt;&gt;</h3><p>must be initialized once the pointer is created</p>
<h3 id="weak-ptr-lt-gt"><a href="#weak-ptr-lt-gt" class="headerlink" title="weak_ptr&lt;&gt;"></a>weak_ptr&lt;&gt;</h3><p>can be assigned</p>
<h3 id="allocator"><a href="#allocator" class="headerlink" title="allocator"></a>allocator</h3><pre class=" language-cpp"><code class="language-cpp">allocator<span class="token operator">&lt;</span>string<span class="token operator">></span> alloc<span class="token punctuation">;</span>
<span class="token keyword">auto</span> <span class="token keyword">const</span> p <span class="token operator">=</span> alloc<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
weak_ptr<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> q <span class="token operator">=</span> p<span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    alloc<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span>q<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token string">"hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
alloc<span class="token punctuation">.</span><span class="token function">deallocate</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">delete</span> p<span class="token punctuation">;</span>		<span class="token comment" spellcheck="true">//provided p points to an object or be nullptr</span>
<span class="token keyword">delete</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> p<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">//provided p points to an array or be nullptr</span>
</code></pre>
</blockquote>
<h2 id="Copy-Assign-and-Destroy"><a href="#Copy-Assign-and-Destroy" class="headerlink" title="Copy, Assign and Destroy"></a>Copy, Assign and Destroy</h2><h3 id="specific-member-function-to-control-above-three-operations"><a href="#specific-member-function-to-control-above-three-operations" class="headerlink" title="specific member function to control above three operations"></a>specific member function to control above three operations</h3><p>copy constructor</p>
<p>copy-assignment operator</p>
<p>move constructor</p>
<p>move-assignment operator</p>
<p>destructor</p>
<h3 id="copy-constructor"><a href="#copy-constructor" class="headerlink" title="copy constructor"></a>copy constructor</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">/*
        *default defination in class body is inline
        *if we don't hope so, we need to define "= default" out of the class body
        *generally, function defined in class body is inline
        */</span>
        <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//default constructor</span>
        <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//copy constructor</span>
        <span class="token comment" spellcheck="true">//first parameter must be a reference, and almost always be a const reference</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Foo2</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">//explicit prevents implicit conversion</span>
        <span class="token keyword">explicit</span> <span class="token function">Foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
        <span class="token keyword">explicit</span> <span class="token function">Foo2</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="copy-assignment-constructor"><a href="#copy-assignment-constructor" class="headerlink" title="copy-assignment constructor"></a>copy-assignment constructor</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">/*
        *we define a copy-assignment constructor below
        *keyword operator+symbol is an overloaded operator
        *which defines an operator(like =,+,- and so on)
        */</span>
        Foo <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span> f<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>n <span class="token operator">=</span> f<span class="token operator">-</span><span class="token operator">></span>n<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Foo f1<span class="token punctuation">,</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//f2 is default initialized</span>
    f1 <span class="token operator">=</span> f2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//equals to f1(f2)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="stop-the-copy"><a href="#stop-the-copy" class="headerlink" title="stop the copy"></a>stop the copy</h4><p>if we donâ€™t want a copy operation, we need to define it as the <strong>delete function</strong></p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">NoCopy</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">NoCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
        *"= delete" must be present when we firstly declare it.
        *
        *by the way, we can delete any functions(except the destructor),
        *thongh i haven't clearly understood its effect and affect.
        *one interesting and meaningful example is, if a class's member
        *can't be implicitly initialized, copied, assigned or destroied,
        *its implicit initializer's member function is deleted.
        *It prevents from creating indestructible object.
        *
        *principle: destructor can't be delete
        */</span>
        <span class="token function">NoCopy</span><span class="token punctuation">(</span><span class="token keyword">const</span> NoCopy <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">//stop the copy</span>
        NoCopy <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> NoCopy <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">//stop the copy-assignment</span>
        <span class="token operator">~</span><span class="token function">NoCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
        *we can put the copy constructor into private zone to prevent from copying it.
        *we need to declare it in the private zone first
        *then define it in the public zone.(in order to prevent friend use it)
        *however, this practice is not recommended.
        */</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="destructor"><a href="#destructor" class="headerlink" title="destructor"></a>destructor</h3><p>destructor delete the resource used by objects, and destruct non-static elements</p>
<p>it is used whenever the object is destroyed</p>
<blockquote>
<p>implicitly destruct a pointer wonâ€™t delete the object it points.</p>
<p>on the contrary, smart pointer is class type with destructor, thus it can delete the object</p>
</blockquote>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//destructor.this function can't be overloaded</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="principle"><a href="#principle" class="headerlink" title="principle"></a>principle</h4><ul>
<li>define destructor before assuring weather it needs a destructor or not</li>
<li>if a class needs a copy constructor, it always need a copy-assignment constructor. And vice verse</li>
</ul>
<h3 id="copy-control-and-resource-management"><a href="#copy-control-and-resource-management" class="headerlink" title="copy control and resource management"></a>copy control and resource management</h3><p>behave like a value: the copy and the original object is fully independent</p>
<p>behave like a pointer: the copy and the original object point to the same underlying data</p>
<h4 id="classes-which-behave-like-a-value"><a href="#classes-which-behave-like-a-value" class="headerlink" title="classes which behave like a value"></a>classes which behave like a value</h4><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">HasPtr</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span>s <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">ps</span><span class="token punctuation">(</span><span class="token keyword">new</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//every HasPtr's copy has its own string member with equal value</span>
        <span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">ps</span><span class="token punctuation">(</span><span class="token keyword">new</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>ps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">i</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
        *most copy assignment constructor combines the function
        *of destructor and copy constructor.
        *
        *for instance, copy assignment constructor
        *destroys the left side object's resource as destructor,
        *and copies data from the right side object
        *to the left one like copy constructor
        *
        *if possible, copy assignment constructor should be exception safe.
        *which means when an exception occurs,
        *it can put the left side object in a meaningful state
        */</span>
        HasPtr <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">~</span><span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> ps<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        std<span class="token operator">::</span>string <span class="token operator">*</span>ps<span class="token punctuation">;</span>
        <span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/*
*in this case, to ensure exception safety,
*we copy the right object's data first
*to ensure exception safety before assignment.
*then we delete the resource of the left object and execute assignment
*/</span>
HasPtr <span class="token operator">&amp;</span>HasPtr<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> newp <span class="token operator">=</span> <span class="token keyword">new</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token operator">*</span>rhs<span class="token punctuation">.</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> ps<span class="token punctuation">;</span>
    ps <span class="token operator">=</span> newp<span class="token punctuation">;</span>
    i <span class="token operator">=</span> rhs<span class="token punctuation">.</span>i<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="classes-which-behave-like-a-pointer"><a href="#classes-which-behave-like-a-pointer" class="headerlink" title="classes which behave like a pointer"></a>classes which behave like a pointer</h4><p>use reference count to control the underlying data</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">HasPtr</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span>s <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">ps</span><span class="token punctuation">(</span><span class="token keyword">new</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> std<span class="token operator">::</span><span class="token function">size_t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//copy the pointer to ensure they point to the same underlying data</span>
        <span class="token comment" spellcheck="true">//increase the reference count</span>
        <span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">ps</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>ps<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">i</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">use</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>use<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token operator">++</span><span class="token operator">*</span>use<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        HasPtr <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">~</span><span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        std<span class="token operator">::</span>string <span class="token operator">*</span>ps<span class="token punctuation">;</span>
        <span class="token keyword">int</span> i<span class="token punctuation">;</span>
        std<span class="token operator">::</span>size_t <span class="token operator">*</span>use<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//reference count</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

HasPtr<span class="token operator">::</span><span class="token operator">~</span><span class="token function">HasPtr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span><span class="token operator">*</span>use <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> ps<span class="token punctuation">;</span>
        <span class="token keyword">delete</span> use<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

HasPtr <span class="token operator">&amp;</span>HasPtr<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> HasPtr <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token operator">++</span><span class="token operator">*</span>rhs<span class="token punctuation">.</span>use<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//execute the left object's destructor</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span><span class="token operator">*</span>use <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> ps<span class="token punctuation">;</span>
        <span class="token keyword">delete</span> use<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//execute assignment</span>
    ps <span class="token operator">=</span> rhs<span class="token punctuation">.</span>ps<span class="token punctuation">;</span>
    i <span class="token operator">=</span> rhs<span class="token punctuation">.</span>i<span class="token punctuation">;</span>
    use <span class="token operator">=</span> rhs<span class="token punctuation">.</span>use<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h3><p>we can swap the pointer to decrease extra memory allocation</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">HasPtr</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>HasPtr <span class="token operator">&amp;</span><span class="token punctuation">,</span> HasPtr <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/*
*if a menber of a class has its own swap function,
*use the std::swap is an error
*and if we implicitly use swap function, the compiler use the overloaded one by default
*/</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>HasPtr <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> HasPtr <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> std<span class="token operator">::</span>swap<span class="token punctuation">;</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>lhs<span class="token punctuation">.</span>ps<span class="token punctuation">,</span>rhs<span class="token punctuation">.</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>lhs<span class="token punctuation">.</span>i<span class="token punctuation">,</span> rhs<span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    HasPtr <span class="token function">h1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">h2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> std<span class="token operator">::</span>swap<span class="token punctuation">;</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span>h2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//use the overloaded one</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//tip:this function can't overload the HasPtr &amp;HasPtr::operator=(HasPtr &amp;rhs)</span>
HasPtr <span class="token operator">&amp;</span>HasPtr<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>HasPtr rhs<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//parameter is a copy, not a reference</span>
    <span class="token function">swap</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//rhs is destroyed</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="move-constructor"><a href="#move-constructor" class="headerlink" title="move constructor"></a>move constructor</h3><blockquote>
<p>library container, string and shared_ptr class support both move and copy operation</p>
<p>IO class and unique_ptr class can be moved, but canâ€™t be copied</p>
</blockquote>
<blockquote>
<p>rvalue reference must be bound to an rvalue. we get rvalue reference through &amp;&amp; instead of &amp;</p>
<p>rvalue reference must be bound to an object ready to be destroyed</p>
<p>therefore, we can freely move an rvalue reference resource to another object</p>
<p>moreover, we can bound a const lvalue reference to an rvalue, as well</p>
<p>expression returns an rvalue. But rvalue reference variate itself is a lvalue</p>
<p>eg:</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">&amp;</span>r <span class="token operator">=</span> i<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>r2 <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>r3 <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>r4 <span class="token operator">=</span> r3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//illegal</span>
</code></pre>
<p>all of them is legal except the last one</p>
</blockquote>
<p>std::move avails to use a lvalue as an rvalue. Whatâ€™s more, we must recognize that executing move means we promote not to use the original element unless we assign or destruct it.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>r4 <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//legal</span>
<span class="token comment" spellcheck="true">//use std::move instead of move in order to prevent from potential naming conflict</span>
</code></pre>
<p>an example of move constructor</p>
<pre class=" language-cpp"><code class="language-cpp">StrVec<span class="token operator">::</span><span class="token function">StrVec</span><span class="token punctuation">(</span>StrVec <span class="token operator">&amp;&amp;</span>s<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token comment" spellcheck="true">//move operation shouldn't throw error</span>
<span class="token comment" spellcheck="true">//initializer take over resource of s</span>
    <span class="token operator">:</span> <span class="token function">elements</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>elements<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">first_feet</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_feet<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>cap<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    s<span class="token punctuation">.</span>elements <span class="token operator">=</span> s<span class="token punctuation">.</span>first_feet <span class="token operator">=</span> s<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span> 
                                    <span class="token comment" spellcheck="true">//brilliant!</span>
                                    <span class="token comment" spellcheck="true">//get the spark of controlling dynamic memory!</span>
    <span class="token comment" spellcheck="true">//now destructing s is safe</span>
    <span class="token comment" spellcheck="true">//i wander weather we permit s to be meaningfully assigned, </span>
    <span class="token comment" spellcheck="true">//and after insperation, i find that void StrVec::push_back(const std::string &amp;)</span>
    <span class="token comment" spellcheck="true">//has considered this situation. Now both assignment and destruction is ligal.</span>
    <span class="token comment" spellcheck="true">//and at the same time we can't read its value</span>
    <span class="token comment" spellcheck="true">//(certainly i put the whole code into my cpp file to avoid making my notes bloated)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="move-assignment-constructor"><a href="#move-assignment-constructor" class="headerlink" title="move assignment constructor"></a>move assignment constructor</h3><pre class=" language-cpp"><code class="language-cpp">StrVec <span class="token operator">&amp;</span>StrVec<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>StrVec <span class="token operator">&amp;&amp;</span>rhs<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//check self-assignment</span>
    <span class="token comment" spellcheck="true">//I guess this operation is designed to avoid freeing itself</span>
    <span class="token comment" spellcheck="true">//otherwise it may move meaningless data and put itself in a meaningless state</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//release itself</span>
        elements <span class="token operator">=</span> rhs<span class="token punctuation">.</span>elements<span class="token punctuation">;</span>
        first_feet <span class="token operator">=</span> rhs<span class="token punctuation">.</span>first_feet<span class="token punctuation">;</span>
        cap <span class="token operator">=</span> rhs<span class="token punctuation">.</span>cap<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//put rhs in a destructible state</span>
        rhs<span class="token punctuation">.</span>elements <span class="token operator">=</span> rhs<span class="token punctuation">.</span>first_feet <span class="token operator">=</span> rhs<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//copy and move operation's overload</span>
StrVec v1<span class="token punctuation">,</span> v2<span class="token punctuation">;</span>
v1 <span class="token operator">=</span> v2<span class="token punctuation">;</span>					<span class="token comment" spellcheck="true">//copy assignment constructor</span>
StrVec <span class="token function">getVec</span><span class="token punctuation">(</span>istream <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">//getVec returns an rvalue</span>
                            <span class="token comment" spellcheck="true">//because getVec() dosen't return value instead of reference</span>
                            <span class="token comment" spellcheck="true">//up to now getVec() is just a declaration</span>

v2 <span class="token operator">=</span> <span class="token function">getVec</span><span class="token punctuation">(</span>cin<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment" spellcheck="true">//move assignment constructor</span>
<span class="token comment" spellcheck="true">/*
*if we didn't define a move constructor
*the compiler will convert an rvalue reference to a const reference
*and call copy constructor
*/</span>
</code></pre>
<h3 id="reference-qualifier"><a href="#reference-qualifier" class="headerlink" title="reference qualifier"></a>reference qualifier</h3><p>C++ permit us to assign value to a rvalue object(so weird)</p>
<p>eg:</p>
<pre class=" language-cpp"><code class="language-cpp">string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">s2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment" spellcheck="true">//s1 = "a", s2 = "bbb";</span>
<span class="token comment" spellcheck="true">/*
*(s1 + s2) is an rvalue which never affects s1 and s2's value without assignment
*usually it is created by compiler and released soon
*the following expression execute:
*	create a string temp_s = s1 + s2 = "abbb";
*	assign "Wow" to temp_s and return "Wow";
*	assign "Wow" to s3;
* 	release temp_s
*Just from my own guess.If there's something wrong, I'll correct it
*/</span>
string s3 <span class="token operator">=</span> <span class="token punctuation">(</span>s1 <span class="token operator">+</span> s2<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"Wow"</span><span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> s3 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre>
<p>we can use the reference qualifier to enforce the left object is an lvalue or an rvalue</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">//the &amp; in the back of parameter list enforce the left object is an lvalue</span>
        Foo <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token punctuation">;</span> 
    <span class="token comment" spellcheck="true">//</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

Foo <span class="token operator">&amp;</span>Foo<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        Foo <span class="token function">someMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//const should be in front of reference qualifier</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>reference qualifier and overloaded</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        Foo <span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span>
        Foo <span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> data<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//because object is an rvalue, we can change itself without any affection</span>
Foo Foo<span class="token operator">::</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
    <span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//object is an lvalue, thus we can't affect its value</span>
Foo Foo<span class="token operator">::</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Foo <span class="token function">temp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> temp<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> temp<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="overloading-and-type-conversion"><a href="#overloading-and-type-conversion" class="headerlink" title="overloading and type conversion"></a>overloading and type conversion</h2><h3 id="basic-concept"><a href="#basic-concept" class="headerlink" title="basic concept"></a>basic concept</h3><ul>
<li><p>an operator function should be a member of a class or have at least than one class type parameter</p>
</li>
<li><p>which means we canâ€™t overload operators acting on the build-in type</p>
</li>
<li><p>overloaded operatorâ€™s priority and associative law is the same as the original operator</p>
</li>
</ul>
<p><strong>operators can be overloaded</strong></p>
<table>
<thead>
<tr>
<th>+</th>
<th>-</th>
<th>*</th>
<th>&#x2F;</th>
<th>%</th>
<th>^</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>&amp;</td>
<td></td>
<td></td>
<td>~</td>
<td>!</td>
<td>,</td>
<td>&#x3D;</td>
</tr>
<tr>
<td>&lt;</td>
<td>&gt;</td>
<td>&lt;&#x3D;</td>
<td>&gt;&#x3D;</td>
<td>++</td>
<td>â€“</td>
<td></td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>&gt;&gt;</td>
<td>&#x3D;&#x3D;</td>
<td>!&#x3D;</td>
<td>&amp;&amp;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>+&#x3D;</td>
<td>-&#x3D;</td>
<td>&#x2F;&#x3D;</td>
<td>%&#x3D;</td>
<td>^&#x3D;</td>
<td>&amp;&#x3D;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>&#x3D;</td>
<td>*&#x3D;</td>
<td>&lt;&lt;&#x3D;</td>
<td>&gt;&gt;&#x3D;</td>
<td>[]</td>
<td>()</td>
</tr>
<tr>
<td>-&gt;</td>
<td>-&gt;*</td>
<td>new</td>
<td>new[]</td>
<td>delete</td>
<td>delete[]</td>
<td></td>
</tr>
</tbody></table>
<p><strong>operators can not be overloaded</strong></p>
<table>
<thead>
<tr>
<th>::</th>
<th>.*</th>
<th>.</th>
<th>? :</th>
</tr>
</thead>
</table>
<h3 id="operators"><a href="#operators" class="headerlink" title="operators"></a>operators</h3><p>there are various of operators overloading practice. and you know, <em>cujus rei demonstrationem mirabilem sane detexi. Hanc marginis exiguitas non caperet</em>.(Iâ€™m sure Iâ€™ve discovered a wonderful demonstration, but the space here is too small to fill it). so I write them all down in my practice .cpp file and just note some announcements there.</p>
<p>The essence of operator overloading is a function call. therefore we canâ€™t save  the original order of evaluation and the short circuit evaluation. and thatâ€™s why we donâ€™t advice you to overload comma, address, logic and, logic or.</p>
<p>when we define an operator as a member function, its left operand must be an object of the operatorâ€™s class.</p>
<p>operator(&#x3D;), index([]), call(()), member accession(-&gt;) operator must be member function of class.</p>
<p>ostream(&lt;&lt;), istream(&gt;&gt;) canâ€™t be member function.</p>
<p>index operator usually define two overloading versions, the const one and the nonconst one.</p>
<p>increase and decrease operators usually be set as member functions.</p>
<pre class=" language-cpp"><code class="language-cpp">strBlobPtr <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment" spellcheck="true">//preoperator</span>
strBlobPtr <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment" spellcheck="true">//postoperator</span>

strBlobPtr strBlobPtr<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    strBlobPtr ret <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token operator">++</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>if we overload the call operator, the object of this class is called function object, because we can call this object. function object is usually used as actual parameter of generic algorithm. moreover, <a href="https://blog.csdn.net/YangZejia0120/article/details/118713608?spm=1001.2014.3001.5501"><strong>lambda</strong></a> is an unnamed classâ€™ unnamed object, whose call operator is overloaded by lambdaâ€™s function body.</p>
<p>liberty <strong>functional</strong> defines a succession of function class as templates. and they are listed below.</p>
<table>
<thead>
<tr>
<th>arithmetic</th>
<th>relation</th>
<th>logic</th>
</tr>
</thead>
<tbody><tr>
<td>plus<Type></Type></td>
<td>equal_to<Type></Type></td>
<td>logical_and<Type></Type></td>
</tr>
<tr>
<td>minus<Type></Type></td>
<td>not_equal_to<Type></Type></td>
<td>logical_or<Type></Type></td>
</tr>
<tr>
<td>multiplies<Type></Type></td>
<td>greater<Type></Type></td>
<td>logical_not<Type></Type></td>
</tr>
<tr>
<td>divides<Type></Type></td>
<td>greater_equal<Type></Type></td>
<td></td>
</tr>
<tr>
<td>modulus<Type></Type></td>
<td>less<Type></Type></td>
<td></td>
</tr>
<tr>
<td>negate<Type></Type></td>
<td>less_equal<Type></Type></td>
<td></td>
</tr>
</tbody></table>
<p>operator <em>type</em>() const is class-type conversions or be named user-define conversions. it allows a type to be an objectâ€™s return type. this conversion is implicit.</p>
<p>we can define explicit conversion operator to control class-type conversion.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">SmallInt</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">SmallInt</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">explicit</span> <span class="token keyword">operator</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> val<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token keyword">int</span> val<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

SmallInt si <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>si<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//explicitly request for type conversion</span>
</code></pre>
<p>however, if the conversion is used as a condition, the compiler will automatically execute the conversion.</p>
<h3 id="function-table"><a href="#function-table" class="headerlink" title="function table"></a>function table</h3><p>function, function pointer, function class, lambda expression, classes built by bind and any other classes which has overloaded the call operator are all callable object. function class defined in liberty <strong>functional</strong> can be used to reserve callable object.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;functional></span></span>

function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">></span> f1 <span class="token operator">=</span> add<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//f1(4,2) == 6; //equal to add(4,2);</span>
<span class="token comment" spellcheck="true">//f1 == true;	//f1 has a callable object;</span>
function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">></span> f2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p>we can define a function table to reserve callable objects with same <em>retType(args)</em>.</p>
<pre class=" language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">>></span> binops <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"+"</span><span class="token punctuation">,</span> add<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>	<span class="token comment" spellcheck="true">//each element is a pair</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"-"</span><span class="token punctuation">,</span> minus<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"%"</span><span class="token punctuation">,</span> mod<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//in this case, binos["+"](4,2) == 6;</span>
</code></pre>
<h2 id="Object-Oriented-Programming"><a href="#Object-Oriented-Programming" class="headerlink" title="Object-Oriented Programming"></a>Object-Oriented Programming</h2><h3 id="inheritance"><a href="#inheritance" class="headerlink" title="inheritance"></a>inheritance</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Quote</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">Quote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
        <span class="token function">Quote</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span>book<span class="token punctuation">,</span> <span class="token keyword">double</span> sales_price<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">bookNo</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">price</span><span class="token punctuation">(</span>sales_price<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>string <span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> bookNo<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//key word virtual defines a virtual function</span>
        <span class="token comment" spellcheck="true">//which means the base class permits drived classes to override it</span>
        <span class="token keyword">virtual</span> <span class="token keyword">double</span> <span class="token function">net_price</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t n<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> n <span class="token operator">*</span> price<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//moreover, if we don't wish our clients use the base class' member function</span>
        <span class="token comment" spellcheck="true">//we need to define this member function to be a pure virtual function as the following code row</span>
        <span class="token comment" spellcheck="true">//notice :the pure virtual function can only be defined in the declaration body</span>
        <span class="token keyword">virtual</span> <span class="token keyword">double</span> <span class="token function">net_price</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t n<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
        <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Quote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//dynamically bind destructor</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        std<span class="token operator">::</span>string bookNo<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
        *key word protected serves for those members
        *which are not supposed to be used by object's users
        *but needed to be used by derived class
        */</span>
    <span class="token keyword">protected</span><span class="token operator">:</span>
        <span class="token keyword">double</span> price <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>		<span class="token comment" spellcheck="true">//common price without discount</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/*
*type of class derivation list:colon and a list of base class
*whose type is base class behind optional assess specifire
*and splited by comma
*/</span>
<span class="token keyword">class</span> <span class="token class-name">Bulk_quote</span><span class="token operator">:</span> <span class="token keyword">public</span> Quote <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">Buli_quote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
        <span class="token function">Built_quote</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">,</span> std<span class="token operator">::</span>size_t<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
        *key word override explicitly declare that this member function
        *will be used to redefine the base class' virtual function
        *if not, the compiler will throw error
        */</span>
        <span class="token keyword">double</span> <span class="token function">net_price</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t<span class="token punctuation">)</span> <span class="token keyword">const</span> override<span class="token punctuation">;</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">//the minimum purchase quantity of discount</span>
        std<span class="token operator">::</span>size_t min_qty <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> discount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p>because derived class has its base class member, compiler can implicitly convert it into its base class as a reference or pointer. On the contrary, compiler doesnâ€™t allow us to implicitly convert base class object into derived class object. However, if we ensure this actionâ€™s safety, we can use <strong>static_cast</strong> enforce the conversion. But this action is not recommended. Whatâ€™s more, if the base class has at least one virtual function, we can use <strong>dynamic_cast</strong> to check this conversionâ€™s safety and let the compiler divides whether allow or not.</p>
<p>if a base class defines a static member, the whole inheritance system has only one instance no matter how many derived classes and objects have been defined.</p>
<p>base class must be defined before defining derived classes.</p>
<p>key word <strong>final</strong> restrict us from using a class as base class. key word <strong>final</strong> can be used to declare that a virtual function is the final function, which means this function canâ€™t be overrode.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">NoDerived</span> final <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//illegal, we can't use Noderived as a base class</span>
<span class="token keyword">class</span> <span class="token class-name">Bad</span><span class="token operator">:</span> <span class="token keyword">public</span> NoDerived <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>virtual function can have acquiescent parameters, and its acquiescent parameters depend on the static type of the call.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Base</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">funcion</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token keyword">public</span> Base<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token keyword">void</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> override<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">execuse_function</span><span class="token punctuation">(</span>Base <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Derived d<span class="token punctuation">;</span>
    <span class="token function">execuse_function</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//execuse Base::function(int a = 0, int b = 1);</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><p><strong>notions:</strong></p>
<ul>
<li>iff the derived class publicly inherits base class can users use the conversions between derived class and base class.</li>
<li>if the derived class publicly or protected inherits base class, the derived class can use the conversions.</li>
<li>if the derived class privately inherits base class, the derived classâ€™ objects and friends canâ€™t use the conversions.</li>
<li>friend relationship canâ€™t be inherited.</li>
<li><strong>each class controls its membersâ€™ accessible permissions.</strong></li>
<li>if we need to change a memberâ€™s accessible permission, we can use the <em>using</em> declaration in the corresponding action scope</li>
</ul>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Base</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        std<span class="token operator">::</span>size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> n<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span><span class="token operator">:</span>
        std<span class="token operator">::</span>size_t n<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//we inherit the base class in the private scope</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token keyword">private</span> Base<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token comment" spellcheck="true">//then Base::size() is public </span>
        <span class="token keyword">using</span> Base<span class="token operator">::</span>size<span class="token punctuation">;</span>
    <span class="token keyword">protected</span><span class="token operator">:</span>
        <span class="token keyword">using</span> Base<span class="token operator">::</span>n<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>acquiescent derived scope operators depend on classâ€™ type. struct acquiescently owns public scope while class having private scope.</p>
<p>derived classâ€™ scope is combined into base classâ€™ scope. thus derived classâ€™ member with the same name as base classâ€™ has higher priority.</p>
<p>name lookup precedes type lookup. function declared in the inner scope wonâ€™t override but cover the outer scopeâ€™s function.(which remind us to use the <em>override</em> key word. otherwise we must ensure that the derived classâ€™s function has the same parameters list as the base classâ€™)</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Base<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Derived<span class="token operator">:</span> Base<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Base's scope operator is public</span>
    <span class="token keyword">int</span> <span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

Derived d<span class="token punctuation">;</span>
Base b<span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment" spellcheck="true">//error:Base::memfunc() is hided. the right way is written below</span>
d<span class="token punctuation">.</span>Base<span class="token operator">::</span><span class="token function">memfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="dynamic-binding"><a href="#dynamic-binding" class="headerlink" title="dynamic binding"></a>dynamic binding</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">double</span> <span class="token function">print_total</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span>
                   <span class="token keyword">const</span> Quote <span class="token operator">&amp;</span>item<span class="token punctuation">,</span> size_t n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//calling Quote::net_price or Bulk_quote::net_price</span>
    <span class="token comment" spellcheck="true">//depends on item's object type</span>
    <span class="token comment" spellcheck="true">//moreover, accessible members which we can use depend on the static type</span>
    <span class="token comment" spellcheck="true">//for instance, this item below has no right to use Bulk_quote's unique public members</span>
    <span class="token keyword">double</span> ret <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">net_price</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    os <span class="token operator">&lt;&lt;</span> <span class="token string">"ISBN: "</span> <span class="token operator">&lt;&lt;</span> item<span class="token punctuation">.</span><span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token operator">&lt;&lt;</span> <span class="token string">"# sold: "</span> <span class="token operator">&lt;&lt;</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">"total due: "</span> <span class="token operator">&lt;&lt;</span> ret <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//if we don'y want to use dynamic binding, we need to explicitly declare the scope</span>
<span class="token keyword">double</span> ret <span class="token operator">=</span> item<span class="token operator">-</span><span class="token operator">></span>Quote<span class="token operator">::</span><span class="token function">net_price</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>now, we need to consider this situation where we delete a derived object pointed by a base class pointer. we must ensure that the delete command executes the derived objectâ€™s destructor. So we declare the base classâ€™ destructor as a virtual function to solve this problem. whatâ€™s more, virtual destructor will impede generating movement operation.</p>
<p>Whatâ€™s more, if we use containers to save objects, it is supposed to indirectly save it. An common usage is using pointer. Then we are able to use base class pointer calling derived objects.</p>
<h2 id="template"><a href="#template" class="headerlink" title="template"></a>template</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> <span class="token comment" spellcheck="true">//key word:template</span>
                        <span class="token comment" spellcheck="true">//&lt;template T> is template parameter list</span>
                      <span class="token comment" spellcheck="true">//template parameters are divided by comma</span>
<span class="token comment" spellcheck="true">/*
*moerover, key word typename is the same with key word class in this situation
*/</span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> v1<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> v2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">></span> v2<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v2 <span class="token operator">&lt;</span> v1<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//type parameter can be used as return type or parameter type</span>
<span class="token comment" spellcheck="true">//it can be used as variables declaration and type translation, as well</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
T <span class="token function">foo</span><span class="token punctuation">(</span>T<span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    T tmp <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//omitted details</span>
    <span class="token keyword">return</span> T<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/*
*we can define nontype parameter and the parameter's value is provided by
*clients or compiler
*in this case, compiler provide nontype parameters int values depends on
*const char array's length
*nontype parameter can be int, object/function pointer or lvalue reference
*/</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">unsigned</span> N<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> M<span class="token operator">></span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>p1<span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>p2<span class="token punctuation">)</span><span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/*
*template can be declared as inline or constexpr
*this declaration should be put between template parameter list and return type
*/</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> <span class="token keyword">inline</span> T <span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>principle</strong>: template functionâ€™s parameters are supposed to be const reference, which guarantees non-copyable objectâ€™s availability.</p>
<p>if we want to define a class member function out of the class body, itâ€™s type should be:</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token operator">></span>
<span class="token keyword">return</span><span class="token operator">-</span>type <span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">::</span>member<span class="token operator">-</span><span class="token function">name</span><span class="token punctuation">(</span>parameter<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>function<span class="token operator">-</span>bod<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>By default, template classâ€™ member function is instantiated when it is called, which help us to use a template class even though there are some member function incompatible with a type, we can use part of class functions.</p>
<h3 id="friend-declaration"><a href="#friend-declaration" class="headerlink" title="friend declaration"></a>friend declaration</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//friend declaration</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">Pal</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Pal</span><span class="token operator">&lt;</span>C<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Pal instantiated by class C is a friend</span>
    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Pal2</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//each instantiated Pal2 is C's friend</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">C2</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Pal</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> X<span class="token operator">></span> <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Pal2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//each instantiated Pal2 is each instantiated C2's friend</span>
                                       <span class="token comment" spellcheck="true">//notice: friend's typename should be different from template class'</span>
    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Pal3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Pal3 is a non-template class, every instantiated C2 is Pal3's friend</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//let template's typename as friend</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span><span class="token keyword">class</span> <span class="token class-name">C3</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> T<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//type T is friend of C3 instantiated by T</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p>if a template class contains static members, each type instantiated class has its own static members.</p>
<p>if we access a type name from a template class, we need to use the key word <strong>typename</strong> to explicitly ask compiler treats the name as a type name.</p>
<p>we can define default template argument, like code below.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token punctuation">,</span> <span class="token keyword">typename</span> F <span class="token operator">=</span> less<span class="token operator">&lt;</span>T<span class="token operator">>></span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> v1<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> v2<span class="token punctuation">,</span> F f<span class="token operator">=</span><span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>v2<span class="token punctuation">,</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//even if all the parameters of a template's typename parameter list is default argued</span>
<span class="token comment" spellcheck="true">//we have to use angle brackets to ask compiler instantiate a class from a template</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">tmp_array</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
tmp_array<span class="token operator">&lt;</span><span class="token operator">></span> a<span class="token punctuation">;</span>
</code></pre>
<p>Besides, it is known that once we define a template classâ€™ type, compiler instantiates a class instance. But this activity faces an embarrassing situation. Once we create a project and use template class with the same type in different file, the compiler will instantiates several instances in each file. Which may be a mass overhead. We can use the key word <strong>extern</strong> to declare a class to prevent from such overhead.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">class</span> <span class="token class-name">Blob</span><span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">;</span>				<span class="token comment" spellcheck="true">//declaration</span>
<span class="token keyword">template</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">//definition</span>
                                                <span class="token comment" spellcheck="true">//in this case, compiler will instantiates the whole members</span>
                                                <span class="token comment" spellcheck="true">//thus the type must apply to every member</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Blob<span class="token operator">&lt;</span>string<span class="token operator">></span> sa1<span class="token punctuation">,</span> sa2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//compiler instantiates class in other file</span>
                        <span class="token comment" spellcheck="true">//Thus key word extern expresses that there is a definition in our project</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>and if we canâ€™t make sure what the return type definitely is, we can use the tail-set return to declare functionâ€™s return type</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//using tail-set return to explicitly declare function's return type</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> It<span class="token operator">></span>
<span class="token keyword">auto</span> <span class="token function">fcn</span><span class="token punctuation">(</span>It beg<span class="token punctuation">,</span> It end<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token operator">*</span>beg<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//details</span>
    <span class="token keyword">return</span> <span class="token operator">*</span>beg<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="reference-collapsing"><a href="#reference-collapsing" class="headerlink" title="reference collapsing:"></a>reference collapsing:</h3><blockquote>
<p>X&amp; &amp;, X&amp; &amp;&amp;, X&amp;&amp; &amp; will collapse to X&amp;</p>
<p>X&amp;&amp; &amp;&amp; will be collapse to X&amp;&amp;</p>
</blockquote>
<p>By define a parameter as an rvalue reference, we can save all of argumentâ€™s type-info. By using reference, we can save the const-info. By define parameters as rvalue references, we can use reference collapsing to save argumentsâ€™ reference characteristic.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token punctuation">,</span><span class="token keyword">typename</span> T1<span class="token punctuation">,</span> <span class="token keyword">typename</span> T2<span class="token operator">></span>
<span class="token keyword">void</span> <span class="token function">flip</span><span class="token punctuation">(</span>F f<span class="token punctuation">,</span> T1 <span class="token operator">&amp;&amp;</span>t1<span class="token punctuation">,</span> T2 <span class="token operator">&amp;&amp;</span>t2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token function">f</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>However, function expression returns an lvalue, which restrict us from binding an rvalue reference to an rvalue reference. In this case, we need to use the lib function <strong>std::forward</strong>, which is defined in lib <em>utility</em>, to save the reference type(by using the reference collapsing). Thus, we modifies the original code to the below one</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token punctuation">,</span><span class="token keyword">typename</span> T1<span class="token punctuation">,</span> <span class="token keyword">typename</span> T2<span class="token operator">></span>
<span class="token keyword">void</span> <span class="token function">flip</span><span class="token punctuation">(</span>F f<span class="token punctuation">,</span> T1 <span class="token operator">&amp;&amp;</span>t1<span class="token punctuation">,</span> T2 <span class="token operator">&amp;&amp;</span>t2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token function">f</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>T1<span class="token operator">></span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>T2<span class="token operator">></span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>When we overload a template function, compiler will chose the more specialized one. Thus if we define a template function</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> string <span class="token function">func</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span> string <span class="token function">func</span><span class="token punctuation">(</span>T <span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*details*/</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>and we hope the compiler may cope with <em>char</em> &amp; <em>const char</em> as <em>string</em>, we need to define two specialized overloaded function</p>
<pre class=" language-cpp"><code class="language-cpp">string <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//declare a string type instance to avoid from default call </span>
string <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
string <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="parameter-packet"><a href="#parameter-packet" class="headerlink" title="parameter packet"></a>parameter packet</h3><p>we use symbol <strong>â€¦</strong> after keyword <em>typename</em> or <em>class</em> to express indefinite number of parameters</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Args is a template parameter packet, rest is a function parameter packet</span>
<span class="token comment" spellcheck="true">//Args means zero or several template parameters</span>
<span class="token comment" spellcheck="true">//rest means zero or several function parameters</span>
<span class="token comment" spellcheck="true">//types in packet can be different from each other</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>
<span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span>t<span class="token punctuation">,</span> <span class="token keyword">const</span> Args<span class="token operator">&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> rest<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span>T<span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>cout<span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>we can use <strong>sizeof</strong> to calculate the number of parameters in the packet</p>
<p><strong>call packet parameters</strong>:</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//end the recursion and print the last element</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
ostream <span class="token operator">&amp;</span><span class="token function">print</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> T <span class="token operator">&amp;</span>t<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> os <span class="token operator">&lt;&lt;</span> t<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//recursion call</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>
ostream <span class="token operator">&amp;</span><span class="token function">print</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> T <span class="token operator">&amp;</span>t<span class="token punctuation">,</span> <span class="token keyword">const</span> Args<span class="token operator">&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> rest<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    os <span class="token operator">&lt;&lt;</span> t <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">print</span><span class="token punctuation">(</span>os<span class="token punctuation">,</span> rest<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> d <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> l <span class="token operator">=</span> <span class="token number">321</span><span class="token punctuation">;</span>
    string s <span class="token operator">=</span> <span class="token string">"hello world!"</span><span class="token punctuation">;</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>cout<span class="token punctuation">,</span> i<span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//output:1       2       321     hello world!</span>
</code></pre>
<h3 id="specialize"><a href="#specialize" class="headerlink" title="specialize"></a>specialize</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//specialize</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span>size_t N<span class="token punctuation">,</span> size_t M<span class="token operator">></span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//const char(&amp;)[M] is a reference to an char array</span>

<span class="token comment" spellcheck="true">//a specialized instance of function compare</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">></span>
<span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token keyword">const</span> <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token keyword">const</span> <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//a reference to an const (or not) pointer</span>
</code></pre>
<p><strong>notice</strong>: Once we need a specialized instance but forget to declare or define one, where there is a template suits to this instanceâ€™s type, the compiler will instantiate an instance. This mistake wonâ€™t be checked up. Thus we are supposed to define templates with the same name in the same header file. And put the specialized instances after those template. Certainly we need to check up whether we have declared an instance or not.</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>Computer Science</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>notes</tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„ 0/3/5 è§„åˆ™</title>
    <url>/2022/08/30/c-0-3-5-rule/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote>
<p>ç¼–ç¨‹ä¸‰å¤§é”™è§‰ï¼š<br>æˆ‘æ¯”ç¼–è¯‘å™¨èªæ˜<br>æˆ‘è¶…è¶Šäº†æ ‡å‡†åº“<br>æˆ‘èƒ½ç®¡å¥½å†…å­˜</p>
</blockquote>
<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>ç”±äºæœ€è¿‘åœ¨çœ‹ã€Šç®—å¯¼ã€‹ï¼Œæˆ‘å°±èŒç”Ÿäº†å®ç°ç®—å¯¼çš„æƒ³æ³•ã€‚ä¹‹å‰å®ç°çš„çº¿è¡¨List.hæ–‡ä»¶ä¸€ç›´ç¨³å®šè¿ä½œï¼Œä½†åœ¨ç»å†äº†å•å…ƒæµ‹è¯•å¹¶ç¨³å®šè¿è¡Œæ•°å¤©åï¼Œå½“æˆ‘å°†å®ƒåº”ç”¨åˆ°æˆ‘çš„æ–°ä»£ç éƒ¨åˆ†æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªbugã€‚<br>æˆ‘çš„ä»£ç æ–‡ä»¶å¦‚ä¸‹ï¼š<br>List.h</p>
<pre class=" language-C++"><code class="language-C++">template<typename T>
class List &#123;
public:
    List() : head(new class Node<T>), tail(new class Node<T>) &#123;
        head->nextNode = tail;
        tail->prevNode = head;
    &#125;

    List(T rs) : List() &#123;
        insert(rs);
    &#125;

    ~List() &#123;
        for (class Node<T> *pointer = tail; pointer != head;) &#123;
            auto temp = pointer;
            pointer = pointer->prevNode;
            delete temp;
        &#125;
        delete head;
    &#125;
    
    void insert(T rs)&#123;
        auto pointer = new class Node<T>(rs, tail->prevNode, tail);
        tail->prevNode = pointer;
        pointer->prevNode->nextNode = pointer;
    &#125;
&#125;
</code></pre>
<p>test.cpp</p>
<pre class=" language-C++"><code class="language-C++">template<class Vertex, class Edge>
class AdjacentList&#123;
private:
    std::map<shared_ptr<Vertex>,List<Edge>>;
&#125;

template<class Vertex, class Edge>
void AdjacentList<Vertex, Edge>::insert(std::shared_ptr<Vertex> origin, std::shared_ptr<Vertex> next, double w) &#123;
    if (!graph[origin])
        graph[origin] = List<Edge>();
    auto x = Edge(next, w);
    graph[origin].insert(x);
&#125;
</code></pre>
<p>æ¥ä¸‹æ¥ç»™ä½ ä¸‰åˆ†é’Ÿï¼Œè¯•è¯•èƒ½ä¸èƒ½æ‰¾å‡ºbugåœ¨å“ªï¼Ÿ</p>
<p>å¦‚æœä½ æ‰¾ä¸å‡ºbugåœ¨å“ªé‡Œï¼Œè¯·æ¥ç€å¾€ä¸‹çœ‹ï¼š<br>C++ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„æ™ºèƒ½æŒ‡é’ˆï¼Œç”¨æ¥ç®¡ç†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬åªè¦ç”¨å¥½æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†èµ„æºå°±å¥½ã€‚ä¸è¿‡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ç©ºé—´ä¸è¶³ï¼Œæˆ–æ˜¯éœ€è¦è‡ªå®šåˆ¶çš„èµ„æºç®¡ç†ç±»ã€‚ç„¶è€Œï¼Œç¼–å†™èµ„æºç®¡ç†ç±»å¾ˆå›°éš¾ï¼Œä½ å¾ˆéš¾æ£€æµ‹å’Œæ’é™¤å†…å­˜æ³„æ¼æˆ–ç©ºæ‚¬æŒ‡é’ˆçš„ç°è±¡ã€‚<br>å›åˆ°æˆ‘ä»¬ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°ï¼Œbugå®é™…ä¸Šå‡ºç°åœ¨</p>
<pre class=" language-C++"><code class="language-C++">if (!graph[origin])
        graph[origin] = List<Edge>();
</code></pre>
<p>è¿™é‡Œã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸æ˜¯åˆå§‹åŒ–ï¼Œè€Œæ˜¯ä½¿ç”¨å¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦</p>
<pre class=" language-C++"><code class="language-C++">ClassType &operate=(ClassType &rs);
</code></pre>
<p>ä¸ºmapçš„secondå€¼èµ‹å€¼ã€‚ç”±äºæˆ‘ä»¬çš„Listç±»å¹¶æ²¡æœ‰è‡ªå®šä¹‰å¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦ï¼ŒC++çš„é»˜è®¤å¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦çš„æ“ä½œæ˜¯å°†åŸæ¥ç±»çš„æ¯ä¸€ä¸ªæˆå‘˜å˜é‡èµ‹å€¼ç»™æ–°çš„ç±»ã€‚æ‰€ä»¥è¿™é‡Œï¼Œ<code>graph[origin]</code>å¾—åˆ°äº†ä¸€ä¸ª<code>List&lt;Edge&gt;()</code>ç±»çš„headå’ŒtailæŒ‡é’ˆï¼ˆæ³¨æ„ï¼Œè¿™æ ·éå¸¸å±é™©ï¼è¦ä¹ˆä¸¤ä¸ªListåœ¨åŒä¸€å—é“¾è¡¨ä¸Šè¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œï¼Œè¦ä¹ˆé€ æˆå†…å­˜æ³„æ¼çš„åæœï¼‰<br>æˆ‘ä»¬åœ¨Listçš„insertå‡½æ•°å¤„æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š<br><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1661856814/gxKom_ztdkff.png" alt="debug1"><br>å¯ä»¥çœ‹åˆ°ï¼Œ<code>graph[origin]</code>çš„headå’Œtailçš„å‰åæŒ‡é’ˆè‰¯å¥½ã€‚ä½†æˆ‘ä»¬å†æ‰§è¡Œä¸€æ­¥çœ‹çœ‹ï¼š<br><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1661856811/J6n22_szifw4.png" alt="debug2"><br>ä½ ä¼šå‘ç°ï¼šå˜é‡pointerç«ŸæŒ‡å‘ä¸€ä¸ªâ€œå·²åˆ†é…â€çš„æŒ‡é’ˆ<code>graph[origin].head</code>ï¼è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å…¶å®åˆ°è¿™é‡Œé—®é¢˜å·²ç»æ¯”è¾ƒæ¸…æ™°äº†ï¼šä¸º<code>graph[origin]</code>èµ‹å€¼çš„<code>List&lt;Edge&gt;()</code>æ˜¯ä¸€ä¸ªå³å€¼ï¼Œåœ¨å®Œæˆèµ‹å€¼è¯­å¥ä¹‹åå°±è¢«ææ„äº†ã€‚æˆ‘ä»¬è‡ªå®šä¹‰çš„ææ„å‡½æ•°ä»tailå¼€å§‹é€ä¸ªå‘å‰ï¼Œå°†æ‰€æœ‰æŒ‡é’ˆæŒ‡å‘çš„èµ„æºé‡Šæ”¾æ‰ã€‚é‚£ä¸ºä»€ä¹ˆåœ¨dubuggerè¿™é‡Œè¿˜èƒ½çœ‹åˆ°headã€tailå’Œå®ƒä»¬æŒ‡å‘çš„å€¼å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨å°†èµ„æºè¿”å›ç»™åŠ¨æ€å†…å­˜æ± çš„æ—¶å€™ä¸ä¼šæ‰§è¡Œç½®é›¶æ“ä½œï¼Œè€Œæ˜¯ç®€å•åœ°å°†è¯¥åœ°å€å…¥æ ˆç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒç”¨ã€‚æ‰€ä»¥æŒ‡å‘è¯¥åœ°å€çš„ç±»ä»ç„¶å¯ä»¥è§£é‡Šâ€”â€”â€”â€”è™½ç„¶å®ƒæ—©å·²è¢«ææ„äº†ã€‚<br>é‚£è¿™ç§é—®é¢˜æ€æ ·è§£å†³å‘¢ï¼Ÿä¸€ç§æ–¹å¼æ˜¯æ­£å¸¸è°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°ä»¥ä¾¿ä¹‹åè°ƒç”¨æˆå‘˜å‡½æ•°ï¼š</p>
<pre class=" language-C++"><code class="language-C++">    if (!graph[origin])
        //construct graph[origin]
        graph[origin];
</code></pre>
<p>ä½†å¦ä¸€ä¸ªæ›´é‡è¦çš„æ“ä½œæ˜¯ï¼Œæ›´æ”¹Listçš„ç±»å‡½æ•°</p>
<h2 id="0-x2F-3-x2F-5è§„åˆ™"><a href="#0-x2F-3-x2F-5è§„åˆ™" class="headerlink" title="0&#x2F;3&#x2F;5è§„åˆ™"></a>0&#x2F;3&#x2F;5è§„åˆ™</h2><h3 id="é›¶è§„åˆ™"><a href="#é›¶è§„åˆ™" class="headerlink" title="é›¶è§„åˆ™"></a>é›¶è§„åˆ™</h3><p>è§„åˆ™çš„é›¶éƒ¨åˆ†è§„å®šï¼Œåœ¨åˆ›å»ºç±»æ—¶ï¼Œä½ å¯ä»¥ä¸ç¼–å†™ä»»ä½•ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆè€Œç”±ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆï¼‰ã€‚</p>
<h3 id="ä¸‰è§„åˆ™"><a href="#ä¸‰è§„åˆ™" class="headerlink" title="ä¸‰è§„åˆ™"></a>ä¸‰è§„åˆ™</h3><blockquote>
<p>å¦‚æœä½ çš„ç±»éœ€è¦ä»»ä½•</p>
<ul>
<li>ä¸€ä¸ªå¤åˆ¶æ„é€ å‡½æ•°ï¼Œ</li>
<li>èµ‹å€¼è¿ç®—ç¬¦ï¼Œ</li>
<li>ææ„å‡½æ•°ï¼Œ</li>
</ul>
<p>æ˜ç¡®å®šä¹‰ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½éœ€è¦è¿™ä¸‰ä¸ªã€‚</p>
</blockquote>
<p>å› ä¸ºå®ƒä»¬ä¸‰ä¸ªé€šå¸¸éƒ½ç”¨äºç®¡ç†èµ„æºï¼Œå¦‚æœä½ çš„ç±»ç”¨æ¥ç®¡ç†èµ„æºï¼Œåˆ™é€šå¸¸éœ€è¦ç®¡ç†å¤åˆ¶å’Œé‡Šæ”¾ã€‚<br>å¦‚æœå¤åˆ¶ç±»ç®¡ç†çš„èµ„æºæ²¡æœ‰è‰¯å¥½çš„è¯­ä¹‰ï¼Œåˆ™è€ƒè™‘é€šè¿‡å°†å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦å£°æ˜ä¸º<code>=delete;</code>ï¼ˆé¼“åŠ±ï¼‰æˆ–æ”¾å…¥ private scope å¹¶ä¸è¿›è¡Œå®šä¹‰ã€‚</p>
<h3 id="äº”è§„åˆ™"><a href="#äº”è§„åˆ™" class="headerlink" title="äº”è§„åˆ™"></a>äº”è§„åˆ™</h3><p>åœ¨ä¸‰è§„åˆ™çš„åŸºç¡€ä¸Šï¼ŒC++11æ ‡å‡†å¼•å…¥äº†å³å€¼ã€‚æ‰€ä»¥è¿˜éœ€è¦è€ƒè™‘ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼å‡½æ•°ï¼Œå³</p>
<pre class=" language-C++"><code class="language-C++">class ClassExample&#123;
public:
    ~ClassExample() = &#123;/*details or default*/&#125;
    
    ClassExample(ClassExample &) = &#123;/*details or default*/&#125;
    
    ClassExample(ClassExample &&) = &#123;/*details or default*/&#125;
    
    ClassExample &operator=(ClassExample &) = &#123;/*details or default*/&#125;
    
    ClassExample &operator=(ClassExample &&) = &#123;/*details or default*/&#125;
&#125;
</code></pre>
<h2 id="ä»£ç æ”¹è¿›"><a href="#ä»£ç æ”¹è¿›" class="headerlink" title="ä»£ç æ”¹è¿›"></a>ä»£ç æ”¹è¿›</h2><p>æˆ‘ä»¬å¢åŠ ç§»åŠ¨èµ‹å€¼æ“ä½œçš„å®šä¹‰ï¼Œå¯ä»¥ç»ƒä¹ ä¸€ä¸‹å…¶ä»–å‡ ä¸ªå‡½æ•°çš„å®šä¹‰ã€‚<br>ç”±äºListç±»çš„<code>head</code>å’Œ<code>tail</code>ä¸ºå“¨å…µå…ƒç´ ï¼Œæˆ‘ä»¬æ— éœ€è€ƒè™‘ï¼Œä¹Ÿæ— éœ€å¤åˆ¶ã€‚è€Œæ˜¯å°†Listç±»ä¸­çš„å…ƒç´ å¤åˆ¶è¿‡æ¥ã€‚</p>
<pre class=" language-C++"><code class="language-C++">template<typename T>
class List &#123;
public:
    List<T> &operator=(List<T> &&rs)&#123;
        //free this class's element but reserve guard elements
        for(auto pointer = tail->prevNode; pointer != head;)&#123;
            auto temp = pointer;
            pointer = pointer->prevNode;
            delete temp;
        &#125;
        //duplicate rs' elements
        for(auto pointer = rs.head->nextNode; pointer != rs.tail; pointer = pointer->nextNode)&#123;
            insert(*pointer);
        &#125;
    &#125;
&#125;
</code></pre>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>codingè¿‡ç¨‹ä¸­è¸©è¿‡çš„å‘</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>debug</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxå¦‚ä½•é€šè¿‡SMTPæœåŠ¡å™¨å‘é€QQé‚®ä»¶</title>
    <url>/2022/06/28/linux-ru-he-tong-guo-smtp-fu-wu-qi-fa-song-qq-you-jian/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>è¿™æ˜¯ã€Šè®¡ç®—æœºç½‘ç»œâ€”â€”è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹é‡Œçš„ä¸€ä¸ªå°å®éªŒï¼Œå¯¹ç†è§£smtpçš„äº¤æµå’Œç”µå­é‚®ä»¶çš„æŠ¥å¤´éƒ½å¾ˆæœ‰å¸®åŠ©ã€‚æ˜¯ä¸ªå¾ˆå€¼å¾—å°è¯•çš„å®éªŒã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½ telnet</p>
<pre class=" language-shell"><code class="language-shell">sudo apt install telnetd -y
</code></pre>
<p>å…¶æ¬¡ï¼ŒæŒ‰ç…§è¿™ä¸ªæ–‡æ¡£æ‰€ç¤ºçš„æ–¹å¼å¼€å¯QQé‚®ç®±çš„SMTPæœåŠ¡<br><a href="https://www.ujcms.com/documentation/351.html"># ä½¿ç”¨QQé‚®ç®±å‘é€é‚®ä»¶ï¼ŒQQé‚®ç®±çš„smtpè®¾ç½®</a><br>å¹¶è®°ä½è‡ªå·±çš„èº«ä»½è®¤è¯å¯†ç ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€linusç³»ç»Ÿçš„<strong>xshell</strong>ï¼ˆå¿«æ·é”® ctrl+alt+Tï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre class=" language-shell"><code class="language-shell">telnet smtp.qq.com 25
</code></pre>
<p>ä¼šçœ‹åˆ°å¦‚ä¸‹è¿”å›ï¼š<br><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1657184045/Pasted_image_20220627002748_uocva7.png" alt="terminal"></p>
<p>ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre class=" language-shell"><code class="language-shell">auth login  //è¾“å…¥å‘½ä»¤éªŒè¯èº«ä»½
334 VXNlcm5hbWU6  //æœåŠ¡å™¨è¿”å›Username:çš„base64ç¼–ç ç¬¦
******** //è¾“å…¥è‡ªå·±é‚®ç®±å·ï¼Œä¾‹123456789@qq.comçš„base64ç¼–ç å€¼
334 UGFzc3dvcmQ6  //æœåŠ¡å™¨è¿”å›Password:çš„base64ç¼–ç ç¬¦
******** //è¾“å…¥è‡ªå·±èº«ä»½è®¤è¯å¯†ç çš„base64ç¼–ç å€¼
235 Authentication successful  //è¿æ¥æˆåŠŸ
</code></pre>
<p>base64ç¼–ç å¯ä»¥ä¸Šç½‘éšä¾¿æ‰¾è½¬æ¢å·¥å…·ï¼Œä¿é™©èµ·è§é‚®ç®±å·å’Œèº«ä»½è®¤è¯å¯†ç åˆ†åˆ«ç”¨ä¸¤ä¸ªä¸åŒçš„ç½‘ç«™ç¼–ç ã€‚æˆ–è‡ªå·±å†™ä¸€ä¸ªä¹Ÿè¡Œã€‚</p>
<p>è¿æ¥æˆåŠŸåå°±å¯ä»¥æŒ‰ç…§ä¹¦ä¸Šçš„æ­¥éª¤ï¼š</p>
<pre class=" language-shell"><code class="language-shell">Helo ****  //ä¸»æœºåï¼Œå¯å¡«é‚®ç®±å·
250-newxmesmtplogicsvrsza9.qq.com-9.21.152.27-66638923
250-SIZE 73400320
250 OK
mail from: <123456789@qq.com> //å¡«ä½ çš„é‚®ç®±å·
250 OK
rcpt to: <123456789@gmail.com>  //å¡«ä½ æƒ³å‘é€çš„é‚®ç®±å·
250 OK
data
354 End data with <CR><LF>.<CR><LF>.
//æŠ¥å¤´å¿…ä¸å¯å°‘ï¼Œå¦åˆ™å¯èƒ½è¢«å½“æˆåƒåœ¾é‚®ä»¶é€€å›
From: 123456789@qq.com
To: 123456789@gmail.com
Subject: It may be a huge joke!

Just a test
Could you reach this message?
.
250 OK: queued as.
</code></pre>
<p>éšåï¼Œå°±èƒ½æˆåŠŸæ”¶åˆ°è¿™ä»½é‚®ä»¶äº†ï¼<br><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1657184045/Pasted_image_20220627004011_n06trm.png" alt="æ¥æ”¶é‚®ä»¶"></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>Computer Networking</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>tutorial</tag>
      </tags>
  </entry>
  <entry>
    <title>é»æ˜é™æ‚„æ‚„</title>
    <url>/2021/09/07/li-ming-jing-qiao-qiao/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="é»æ˜é™æ‚„æ‚„"><a href="#é»æ˜é™æ‚„æ‚„" class="headerlink" title="é»æ˜é™æ‚„æ‚„"></a>é»æ˜é™æ‚„æ‚„</h1><h2 id="å­å¤œ"><a href="#å­å¤œ" class="headerlink" title="å­å¤œ"></a>å­å¤œ</h2><blockquote>
<p>She was still too young to know that life never gives anything for nothing, and that a price is always exacted for what fate bestows.</p>
<p align="right"><i>Marie Antoinette: Bildnis eines mittleren</i></p>
</blockquote>
<p>åœ¨æˆ‘å¹´çºªå°šå°æ—¶ï¼Œå¹³æ—¥æ€»å–œæ¬¢æŠ±ç€ä¸€æœ¬ä¹¦çœ‹ï¼Œå¤§æ¦‚æ˜¯ä¸ºäº†æ¶ˆé£ï¼Œä¹Ÿæœ‰äº›æ–‡é’æƒ…æ€€è¿˜æœªé€€å´ã€‚å¯æƒœæˆ‘å¯¹æ–‡å­¦çš„çƒ­çˆ±å¹¶ä¸å¦‚ä½•æµ“éƒâ€”â€”å®ƒè¿œä¸èƒ½ä½¿æˆ‘åŸ‹å¤´æ¡ˆç‰çš“é¦–ç©·ç»ï¼Œé¡¶å¤šæ˜¯è®©æˆ‘è¯»ä¸¤æœ¬å…¥é—¨é—¨æ§›ä¸é‚£ä¹ˆé«˜ï¼Œä¸ä»–äººé—²èŠæ—¶èƒ½å¼•é‚£ä¹ˆä¸€ä¸¤å¥çš„å›¾ä¹¦ç½¢äº†ã€‚è€Œä¸”å¾ˆæ˜æ˜¾æˆ‘çš„ç­›é€‰èƒ½åŠ›ä¹Ÿå¹¶ä¸å¼ºâ€”â€”æ¯å½“æœ‰å¥³å­©å­çœ‹è§æˆ‘åœ¨è¯»ä¹¦ï¼Œå‡‘è¿‡æ¥é—®ä¸€å¥ï¼šâ€œä½ åœ¨è¯»ä»€ä¹ˆä¹¦å•Šï¼Ÿâ€ï¼Œä¸å‡ºæ„å¤–å¥¹ä»¬æ€»ä¼šè¢«ä¹¦åå“èµ°ã€‚å³ä½¿å‡ºäº†æ„å¤–ï¼Œå¥¹ä»¬ä¹Ÿå¤§æ¦‚ç‡è¢«æˆ‘æ¥ä¸‹æ¥å°è¯•æ¦‚æ‹¬ä¹¦æœ¬å†…å®¹çš„è¯å“èµ°â€”â€”è¿™è¯æ˜æˆ‘å¯¹é—¨æ§›çš„åˆ¤æ–­è¿˜æ˜¯æœ‰ç‚¹é«˜äº†ã€‚</p>
<p>æœ¬èŠ‚å¼€å¤´å¼•çš„è¿™å¥è¯å‡ºè‡ªæ–¯è’‚èŠ¬Â·èŒ¨å¨æ ¼çš„ã€Šæ–­å¤´çš‡åã€‹ã€‚å¾ˆæ˜¾ç„¶ï¼Œä½œä¸ºä¸€ä¸ªæ–‡é’ï¼Œæˆ‘åº”è¯¥æ˜¯åœ¨æŸä¸€æœŸçš„ã€Šæ„æ—ã€‹æˆ–ã€Šè¯»è€…ã€‹ä¸Šçœ‹åˆ°äº†è¿™å¥è¯ç„¶åè®°äº†ä¸‹æ¥ï¼›è‡³äºè¿™æœ¬ä¹¦ï¼Œé‚£æ˜¯ä¸‡ä¸‡ä¸å¯èƒ½è¯»çš„ã€‚å½“ç„¶ï¼Œæœ‰äº›ä¹¦è¯»å®Œä»¥åï¼Œä½ ç¡®å®èƒ½æ„Ÿè§‰åˆ°æ•´æœ¬ä¹¦å”¯ä¸€æœ‰ä»·å€¼çš„åœ°æ–¹å°±æ˜¯ä¹¦å°ä¸Šå†™çš„é‚£å¥â€œåè¨€â€â€”â€”å½“ç„¶ä¸æ˜¯è¿™æœ¬ä¹¦ï¼Œè¿™æœ¬ä¹¦æˆ‘ç¡®å®æ²¡è¯»è¿‡ã€‚å¼•è¿™å¥è¯çš„ç¼˜ç”±å‘¢ï¼Œæ˜¯æˆ‘ä¸€ä¸ªæœ‹å‹æ‰˜æˆ‘å†™æ–‡è®°å½•ä¸€ä»¶äº‹æƒ…ï¼Œä»–çš„äº‹æƒ…è®©æˆ‘æƒ³èµ·äº†è¿™å¥è¯ã€‚å½“ç„¶ï¼Œåé¢ä¼šå¼•çš„ä¸€äº›è¯­å¥å’Œå†™æ³•ï¼Œæå‰å£°æ˜ä¸€ä¸‹ï¼Œéƒ½å‡ºäºæˆ‘ä¹‹æ‰‹ã€‚æˆ‘çš„è¿™ä¸ªæœ‹å‹æ˜¯ä¸ªçº¯ç†å·¥ç›´ç”·ï¼ŒåŠç‚¹æ–‡å­¦ç»†èŒéƒ½æ²¡æœ‰ï¼Œåé¢çš„ç†å·¥ç§‘æœ¯è¯­éƒ½å‡ºè‡ªä»–ä¹‹å£ã€‚</p>
<p>æ•…äº‹çš„å¼€å¤´æ˜¯æƒ¯ä¾‹çš„å‡è¯­æ‘è¨€ã€çœŸäº‹éšä»€ä¹ˆçš„ï¼Œæˆ‘ä»¬æƒç§°æˆ‘çš„è¿™ä¸ªæœ‹å‹å«yzjå§ã€‚æ—©åœ¨åä½™å¤©å‰ï¼Œyzjæ­£æ¸©æ¸©åååœ°èµ¶ç€è‡ªå·±æŸé—¨è¯¾ç¨‹çš„å¤§ä½œä¸šã€‚å½¼æ—¶è·ddlå°šæ—©ï¼Œåˆå…¼å¤§ä½œä¸šçš„è¦æ±‚å¾ˆéšæ™¦ï¼Œä¸ä¸Šæ‰‹æ ¹æœ¬æ‚ä¸å‡ºæ–¤ä¸¤ã€‚ç²—çŸäº†ä¸¤çœ¼è¦æ±‚æ–‡ä»¶çš„yzjä»—ç€è‡ªå·±å­¦è¿‡ä¸€ç‚¹ç›¸å…³è¯¾ç¨‹ï¼Œä¼šä¸¤å¥C++è¯­æ³•ï¼Œä¸å…æœ‰äº›é£˜é£˜ç„¶ã€‚å°½ç®¡è€å¸ˆæé†’åœ¨å…ˆï¼Œyzjæ€»è§‰å¾—è‡ªå·±ä¸ç®—æ‰€è°“çš„â€œå¾ˆå¤šåŒå­¦â€ã€‚åæ¥çš„äº‹å®è¯æ˜äº†ä»–çš„è§‚ç‚¹ï¼Œyzjç¡®å®ä¸ç®—å¾ˆå¤šåŒå­¦ï¼Œè€Œæ˜¯æ­£æ€åˆ†å¸ƒæ›²çº¿æœ€å·¦è¾¹çš„é‚£ä¸€æ’®ã€‚</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114183/image-20210908023538649_axllra.png"></p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œyzjåœ¨ddlåä½™å¤©å‰æ‰æ–°å»ºäº†åä¸ºfinalprojectçš„æ–‡ä»¶å¤¹ï¼Œå¼€å§‹äº†é€ è½®å­ä¹‹æ—…ã€‚èµ·åˆä¸ºäº†å†™å¾—é¡ºæ‰‹ï¼Œä»–æŒ‰ç…§matlabçš„æ“ä½œæ–¹å¼å†™äº†ä¸ªçŸ©é˜µç±»ï¼Œè¿™ä¸ªç±»é‡è½½äº†å¾ˆå¤šæ–¹æ³•ï¼Œä¹Ÿå†™äº†ä¸€äº›åŸºæœ¬çš„è®¡ç®—ï¼ŒåŠ äº†å¾ˆå¤šè¯­æ³•ç³–ã€‚æ®yzjè¡¨ç¤ºï¼Œè¿™æ˜¯ä»–åé¢å†™å…¶ä»–ä»£ç æ—¶å”¯ä¸€çš„æ…°ç±ï¼Œç”¨èµ·æ¥å¤ªé¡ºæ‰‹äº†ã€‚è€Œä¸”è¿™ä¸ªç±»ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„å°±æ˜¯æ¼‚äº®ï¼Œå¾ˆå¥½åœ°éµå¾ªäº†è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿé’ˆå¯¹æ€§èƒ½åšäº†å¾ˆå¤šä¼˜åŒ–ã€‚ä¸è¿‡æ®ä»–åæ€ï¼Œåœ¨é¡¹ç›®å®Œæˆå‰å°±æä¼˜åŒ–æ˜¯å¤§å¿Œï¼Œå±äºæ–°æ‰‹å°ç™½æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ä¹‹ä¸€ã€‚è¿™ä¸ªå¾ˆæ¼‚äº®çš„è½®å­èŠ±äº†ä»–å¾ˆå¤šæ—¶é—´ï¼Œç­‰åˆ°ä»–çœŸçš„å¼€å§‹æ¥è§¦æ ¸å¿ƒè®¡ç®—ä»£ç æ—¶ï¼Œæ—¶é—´å·²ç»ä¸å…è®¸ä»–è®¾è®¡æ¼‚äº®çš„ç±»äº†ã€‚</p>
<h2 id="é¸¡é¸£"><a href="#é¸¡é¸£" class="headerlink" title="é¸¡é¸£"></a>é¸¡é¸£</h2><blockquote>
<p>Is life always this hard, or is it just when youâ€™re working on your ddl?</p>
<p>Always like this.</p>
<p align="right"><i>re-creation from LÃ©on</i></p>
</blockquote>
<p>å…¶å®è®¾è®¡ä¸äº†æ¼‚äº®çš„ç±»ä¸ç®—ä¸€ä¸ªå¤§é—®é¢˜ã€‚è™½ç„¶å°±yzjæ‰€è¨€ï¼Œä»–è®¾è®¡äº†ä¸€ä¸ªå°è£…åœ°æ²¹ç›ä¸è¿›ä¸æ¯«ä¸æ¼çš„ç±»ç”¨æ¥å‚¨å­˜æ•°æ®ï¼Œåæ¥æ‰å‘ç°å¾ˆå¤šå‡½æ•°ã€æ–¹æ³•éƒ½è¦ç”¨åˆ°è¿™é‡Œé¢çš„æ•°æ®ï¼Œä¸å¾—ä¸è®¾è®¡ä¸€ä¸ªä¸ªå¥‡æ€ªçš„æ¥å£ä»¥ä¾›æ“ä½œï¼›æœ€åç”šè‡³æ¨ä¸å¾—æŠŠprivate scopeæ”¹æˆpublic scopeä¸€åŠ³æ°¸é€¸ã€‚ç„¶è€Œå°±ç¬”è€…æ¥çœ‹ï¼Œè¿™å¯¹æ²»ç–—æˆ‘è¿™ä¸ªæœ‹å‹å¹æ¯›æ±‚ç–µçš„å®¡ç¾æ´ç™–ç®€ç›´æ˜¯å¤§åŠŸä¸€ä»¶ã€‚è€Œä¸”æˆ‘è¿™ä¸ªæœ‹å‹å†™å‡ºæ¥çš„æ‹™åŠ£ä»£ç ï¼Œè¿™è¾ˆå­éƒ½ä¸å¯èƒ½æœ‰ç¬¬äºŒä¸ªäººå»çœ‹äº†ï¼ˆå“¦ï¼Œé™¤äº†è¿™é—¨è¯¾çš„å¯æ€œåŠ©æ•™ï¼Œmay destiny bless himï¼‰ï¼Œä¹Ÿå…å¾—æ‹–ç´¯åˆ«äººï¼Œå°é—®é¢˜å°é—®é¢˜ã€‚</p>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œæ›´å¤§çš„é—®é¢˜åœ¨äº,ä½ è¦å…ˆè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œç„¶åæ‰å†è€ƒè™‘å¦‚ä½•æ¼‚äº®åœ°è§£å†³é—®é¢˜ã€‚æˆ‘è¿™ä¸ªæœ‹å‹æ—¶å¸¸æ‹ä¸æ¸…è¿™ä¸¤è€…ä¹‹é—´çš„å…³ç³»ã€‚è¿™åœ¨å¹³æ—¥é‡Œä»–è‡ªå­¦ä¸€äº›ä¸œè¥¿çš„æ—¶å€™é—®é¢˜å€’ä¹Ÿä¸å¤§ï¼Œæœ‰å……è¶³çš„æ—¶é—´æ‹¿æ¥å¤„ç†ç»†èŠ‚ã€‚è€Œä¸”ä»–è‡ªå­¦çš„æ—¶å€™æ€»æ˜¯æ‹¿ç»å…¸æ•™æä¸€å¼ å¼ åœ°ç¿»è¿‡å»ï¼Œè¿™äº›æ•™ææ€»æ˜¯äº‹æ— å·¨ç»†åœ°åˆ—å‡ºæ‰€æœ‰ç»†èŠ‚ï¼Œè¿™å¾€å¾€å¯ä»¥è§£ç­”yzjçš„å›°æƒ‘ã€‚ç„¶è€Œå®æ“é¡¹ç›®æ—¶ï¼Œé—®é¢˜å°±å˜å¾—ä¸å¯æ§äº†èµ·æ¥ã€‚é‡åˆ°çš„é—®é¢˜å¾€å¾€å¾ˆåï¼Œä¹Ÿæ²¡æœ‰è¶³å¤Ÿè¯¦ç»†çš„è§£å†³æ–¹æ¡ˆï¼›ç½‘ä¸Šçš„æ•™ç¨‹å¤šåŠæ‚æ‹¼ä¹±å‡‘ä¸æ±‚ç”šè§£ï¼Œyzjç”šè‡³é‡åˆ°å‡ ä¸ªGoogleéƒ½æ²¡åŠæ³•è§£ç­”çš„bugã€‚è¿™ç§æ—¶å€™ä¸€èˆ¬äººä¼šæ¢ä¸ªæ–¹æ³•æˆ–æ€è·¯ï¼Œä½†æˆ‘è¿™ä¸ªæœ‹å‹ï¼Œä»–è¿˜æœ‰å¼ºè¿«ç—‡â€”â€”ä»€ä¹ˆäººå‘è¿™æ˜¯â€”â€”ä»–ä¼šç»§ç»­æ­»ç£•ï¼Œç›´åˆ°æ’å—å¢™ä¸ºæ­¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œyzjä¸€å¼€å§‹æƒ³è‡ªå·±å†™ç»˜å›¾åŒ…ï¼Œå°è¯•äº†ä¸¤å¤©å‘ç°è‡ªå·±æ°´å¹³ä¸å¤Ÿï¼Œäºæ˜¯æ¢äº†ä¸€ä¸ªå¼€æºçš„ç»˜å›¾åŒ…ã€‚è¿™ä¸ªåŒ…å€’æ˜¯èƒ½è·‘ï¼Œå¯æƒœå¤ªä¸‘ï¼Œyzjä¸æ»¡æ„ï¼Œè·‘å»å†™pythonç»˜å›¾é€»è¾‘ã€‚å†™å®Œåä»–ä¸€æ‹å¤§è„‘æƒ³æåµŒå…¥ä»£ç ï¼Œé‚è¿·ä¹‹è‡ªä¿¡åœ°è·‘å»è·‘å»çœ‹Cython tutorialï¼Œç½‘ä¸Šçš„æ•™ç¨‹å¾ˆå°‘ï¼Œä¹Ÿè§£å†³ä¸äº†yzjçš„é—®é¢˜ï¼Œä»–åˆè·‘å»çœ‹Cython Documentã€‚è¢«ç¯å¢ƒå˜é‡ç»•æ™•ååˆè·‘å»çœ‹CMake Documentï¼ˆä»–å¼ºçƒˆè¦æ±‚æˆ‘ä¸å‘Šè¯‰ä½ ä»¬ï¼Œä»–ä¸€å¼€å§‹è¿˜çœ‹äº†å‡ å¤©Makefile Documentï¼‰ã€‚ä¸€ç•ªä¸‹æ¥ï¼Œå‡ å¤©å…‰é˜´è™šåº¦ï¼Œé¡¹ç›®ä¸€ç‚¹æ²¡åšã€‚çºµè§‚yzjçš„æ•´ä¸ªé¡¹ç›®æµç¨‹ï¼ŒåŸºæœ¬ä¸Šéƒ½è€—åœ¨è¿™ç§ç»†ææœ«èŠ‚ä½†å¾€å¾€è€—è´¹å·¨ç»†çš„åœ°æ–¹ä¸Šäº†ã€‚å¯¹äº†ï¼Œyzjè¡¨ç¤ºCythonç¡®å®å¾ˆæœ‰æ„æ€ï¼Œæƒ³å¡«åˆ°è‡ªå·±çš„æŠ€æœ¯æ ˆé‡Œã€‚æ—¢ç„¶å¤§ä½œä¸šddlå·²ç»ç»“æŸäº†ï¼Œæ¥ä¸‹æ¥ä»–å¤§æ¦‚ä¼šç»§ç»­çœ‹Cython Documentå¹¶å†™äº›åšå®¢ç¬”è®°ä»€ä¹ˆçš„å§ã€‚</p>
<p>æ€»ä¹‹æˆ‘è¿™ä¸ªæœ‹å‹èº«ä¸Šè¿˜æœ‰äº›å­¦ç”Ÿæ€ç»´æ²¡è½¬å˜è¿‡æ¥ï¼Œè¿™æˆ‘å¾—å¥½å¥½åŠåŠä»–ã€‚</p>
<p>ç«™åœ¨ä¸€ä¸ªæ—äººçš„è§’åº¦ï¼Œä¸Šé¢çš„è¯è¯­å¯èƒ½æœ‰äº›å¹³æ·¡ï¼Œå¥½åƒåœ¨è®²è¿°ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„æ•…äº‹ã€‚ç„¶è€Œç«™åœ¨å½“äº‹äººçš„è§’åº¦ï¼Œæ—¶é—´çš„æµé€å´æ˜¯æ— æ¯”çœŸåˆ‡çš„ã€‚æ¯å¤©æ˜¾ç¤ºå±å·¦ä¸‹è§’çš„æ—¥æœŸéƒ½ä¼šè·³ä¸€ä¸ªæ•°å­—ï¼Œè¿™æ˜­ç¤ºç€è‡ªå·±å¯ä»¥æ‹¿æ¥èµ¶ddlçš„æ—¶é—´åˆå°‘äº†ä¸€å¤©ã€‚å±å¹•å·¦ä¸Šè§’çš„todo-listä¹Ÿæ€»æœ‰ä¸€ä¸¤ä¸ªä»»åŠ¡å˜æˆçº¢è‰²â€”â€”è¿™æ„å‘³ç€ä»–æ²¡æœ‰åœ¨è‡ªå·±è®¾å®šçš„æœŸé™å‰å®Œæˆè¿™ä¸ªæ¨¡å—ã€‚æˆ‘çš„è¿™ä¸ªæœ‹å‹ï¼Œä¸çŸ¥é“å‡ºäºå‹åŠ›è¿˜æ˜¯ä»€ä¹ˆåŸå› ï¼Œåœæ‰äº†æ™šä¸Šçš„è·‘æ­¥ï¼Œå’Œå…¶ä»–äººçš„èŠå¤©ä¹Ÿä¼šå°½å¿«ç»“æŸæ‰ï¼Œæ¯å¤©æ™šä¸Šç¡è§‰è¶Šæ¥è¶Šè¿Ÿï¼Œç¬¬äºŒå¤©ä¸­åˆæ‰èƒ½é†’æ¥ï¼›æ—¥å¸¸æ´»åŠ¨ä¹Ÿå˜æˆäº†æ¯å¤©ä¸¤æ¬¡çš„å–å¤–å–ã€‚å¯æƒœä»–å‘è´¨å¥½ï¼Œå°±è¿™æ ·çš„ç”Ÿæ´»è¿‡äº†å‡ å¤©éƒ½ä¸æ‰å¤´å‘ï¼Œæ®Šä¸ºå¯æ°”ã€‚</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114184/QQ%E5%9B%BE%E7%89%8720210908163738_xhqv9u.jpg"></p>
<h2 id="å¹³æ—¦"><a href="#å¹³æ—¦" class="headerlink" title="å¹³æ—¦"></a>å¹³æ—¦</h2><blockquote>
<p>A half-million years in the future that twinkling of curiosity would have led his mind out into the universe to explore the mathematical mysteries of relativity. Now â€¦</p>
<p align="right"><i>Dragon's Egg</i></p>
</blockquote>
<p>èµ¶ddlçš„è¿‡ç¨‹çš„ç¡®ç—›è‹¦ï¼Œç„¶è€Œå½“ä½ å‘ç°å…¶ä»–äººå’Œä½ ä¸€æ ·ç—›è‹¦çš„æ—¶å€™ï¼Œè¿™ç§ç—›è‹¦å°±ä¼šæ— å½¢ä¹‹ä¸­å‡è½»ä¸€ç‚¹ã€‚</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114184/QQ%E5%9B%BE%E7%89%8720210908165420_zwxqgw.png"></p>
<p>å½“ç„¶ï¼Œä¸Šè¿°è¡¨æƒ…åŒ…çº¯å±å¼€ç©ç¬‘ã€‚åœ¨yzjèµ¶ddlä¸­ï¼Œå‘ç°è¿™æ¬¡å¤§ä½œä¸šç¡®å®æœ‰ç‚¹è¶…çº²ï¼Œä¸å°‘åŒå­¦éƒ½è¡¨ç¤ºéš¾ä»¥ä¸‹æ‰‹ã€‚å†™ç´¯äº†å’ŒåŒåœ¨è‚ä½œä¸šçš„åŒå­¦&amp;æœ‹å‹åæ§½ä¾¿æˆäº†yzjæ¯ç‡¥ç”Ÿæ´»çš„å°‘æœ‰çš„ä¹è¶£ã€‚æœç„¶ä¸–ç•Œä¸Šæ²¡æœ‰çœŸæ­£çš„æ„ŸåŒèº«å—ï¼Œåªæœ‰çœŸçš„ç»æ­¤ä¸€åŠ«ï¼Œyzjæ‰æ˜ç™½è‹è”ç¬‘è¯ä¸ºä»€ä¹ˆä¼šæˆä¸ºä¸–ç•Œéé—ã€‚</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114183/image-20210908170757983_gr2gzm.png"></p>
<p>å½“ç„¶ï¼Œä¹Ÿæœ‰å¤§ä½¬æ¯”è¾ƒè¶…è„±ï¼Œé è‡ªå·±å‡ºè‰²çš„è‹±æ–‡æ–‡çŒ®é˜…è¯»èƒ½åŠ›ä¸ä»£ç èƒ½åŠ›ä¸€éª‘ç»å°˜äºyzjè¿™ç­‰å‡¡å¤«ä¿—å­ã€‚ä»–çš„è¿›åº¦è¿œå¿«äºå…¶ä»–äººï¼Œä¹Ÿåœ¨ddlè¿‡ç¨‹ä¸­ç»™äºˆäº†yzjè¶³å¤Ÿçš„å¸®åŠ©ã€‚åœ¨æ­¤è°¨ä»£è¡¨yzjå‘ä»–è‡´ä»¥æ·±æ·±çš„respectã€‚</p>
<p>åœ¨å„ç§å„ç§è°ƒä¾ƒå’Œå¸®åŠ©ä¸‹ï¼Œyzjè¿˜æ˜¯æ…¢æ…¢åœ°æŠŠè‡ªå·±çš„å¤§ä½œä¸šåšäº†å‡ºæ¥ã€‚ä»ä¸€å¼€å§‹çš„æœ›ä¹‹ä¸ä¼¼äººå½¢çš„æ‹Ÿåˆå›¾å½¢åˆ°æ¸æ¸èƒ½çœ‹å‡ºå¤§æ¦‚è½®å»“ï¼Œå†åˆ°å¤šå°‘æœ‰é‚£ä¹ˆä¸€ç‚¹æ„Ÿè§‰ã€‚ï¼ˆå¯ä»¥çœ‹å‡ºæœ€åä¸€å¼ å›¾è¿˜æ˜¯æœ‰å¼‚å¸¸ç‚¹ï¼Œå¯èƒ½æ˜¯å‡ºäºè®¡ç®—æœºç²¾åº¦å’Œå¼‚å¸¸çŸ©é˜µçš„åŸå› ï¼Œæˆ–æ˜¯è¿˜æœ‰yzjæ²¡æœ‰è€ƒè™‘åˆ°çš„bugï¼›ä¸è¿‡å®åœ¨å¤ªç´¯å°±æ²¡å¿ƒæƒ…è°ƒäº†ï¼‰</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114184/QQ%E5%9B%BE%E7%89%8720210908200114_dsy4ru.png"></p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114184/QQ%E5%9B%BE%E7%89%8720210908200123_adlhe8.png"></p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114185/QQ%E5%9B%BE%E7%89%8720210908200126_z2hzqn.jpg"></p>
<p>åšå‡ºæ•ˆæœåï¼Œåé¢çš„é¢˜å°±å¥½åšäº†å¾ˆå¤šã€‚å‰é¢çš„æˆæœå’Œè½®å­ä¹Ÿèƒ½ç»§ç»­è·‘ä¸‹å»ã€‚yzjç”¨æœ€åä»…å‰©çš„ä¸¤ä¸‰å¤©æ—¶é—´ç´§èµ¶æ…¢èµ¶åœ°åšå®Œäº†åé¢çš„è¦æ±‚ã€‚</p>
<h2 id="ç ´æ™“"><a href="#ç ´æ™“" class="headerlink" title="ç ´æ™“"></a>ç ´æ™“</h2><blockquote>
<p>There is only one heroism in the world: to see the world as it is and to love it.</p>
<p align="right"><i>Romain Rolland</i></p>
</blockquote>
<p>æ—¶é—´æ¥åˆ°äº†9æœˆ8æ—¥å‡Œæ™¨æœ‰ä½™ã€‚ç¦»äº¤ä½œä¸šçš„ddlè¿˜æœ‰çº¦ä¹ä¸ªå°æ—¶ã€‚è¿™æ—¶å€™ï¼Œyzjå·²ç»å®ç°äº†å¤§ä½œä¸šçš„åŸºæœ¬è¦æ±‚ï¼Œç„¶è€Œè¿˜æœ‰å¦å¤–ä¸€äº›è¦æ±‚ç­‰å¾…å®ç°ã€‚â€œåæ­£éƒ½ç†¬äº†è¿™ä¹ˆå¤šå¤©äº†ï¼Œå†ç†¬ä¸€å¤©æŠŠåŠŸèƒ½åšå®Œå§ã€‚â€yzjå¿ƒæƒ³ï¼Œéšæœºåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„header fileï¼Œæ‰“å¼€äº†æ–‡çŒ®å’ŒGoogleã€‚</p>
<blockquote>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114183/image-20210908204043478_bdmuin.png"></p>
</blockquote>
<p>9æœˆ8æ—¥å‡Œæ™¨ä¸¤ç‚¹ï¼Œyzjçœ‹å®Œè®ºæ–‡å†…çš„ç›¸å…³ç®—æ³•ååˆä¸ŠGoogleæœäº†ä¸€ä¸‹æˆç†Ÿçš„å‰ç½®ç®—æ³•ï¼Œå‘ç°è‡ªå·±å³ä½¿åˆ·ç©¿äº†å¤œï¼Œä¹Ÿå¯èƒ½å®Œä¸æˆå‰©ä¸‹çš„å†…å®¹äº†ã€‚åœ¨è‡ªå·±çš„documenté‡Œæ”¾ä¸€ä¸ªå®Œæˆäº†ä¸€åŠï¼Œç”šè‡³æ²¡æœ‰å¯è§†åŒ–å’Œå¯ä»¥ä¾› clients è°ƒç”¨çš„ interfaceï¼Œçº¯é ä¸æˆä½“ç³»çš„ä»£ç å¤®æ±‚åŠ©æ•™ç»™ç‚¹åˆ†å®åœ¨ä¸å¤§ä½“é¢ã€‚å†µä¸”ä¸»è¦åŠŸèƒ½éƒ½åšå‡ºæ¥äº†ï¼Œå¤§éƒ¨åˆ†çš„åˆ†éƒ½èƒ½æ‹¿åˆ°ï¼Œç´¢æ€§ç›´æ¥äº¤äº†ï¼Œä¹Ÿå…å¾—æ‰å¤´å‘ã€‚äºæ˜¯ï¼ŒyzjæŠŠä»£ç åˆè°ƒè¯•äº†æœ€åä¸€éï¼Œæ£€æŸ¥äº†ä¸€ä¸‹è‡ªå·±çš„documentï¼Œå°†å®ƒä»¬æ‰“åŒ…å¥½ï¼Œé‚®ä»¶å‘ç»™äº†åŠ©æ•™ã€‚ç²—ç®—äº†ä¸€ä¸‹ï¼Œæœ€ç»ˆæ–‡ä»¶ä¸€å…±1300è¡Œå·¦å³çš„ä»£ç é‡ï¼Œ4.5kbçš„æµ‹è¯•ç”¨ä¾‹ï¼ˆè€ƒè™‘åˆ°ä»£ç å†™å¾—å®åœ¨å¤ªçƒ‚çš„å› ç´ ï¼Œæœ‰æ•ˆä»£ç å¯èƒ½è¦æ‰“å¯¹æŠ˜æˆ–ä¸‰åˆ†ä¹‹ä¸€ï¼‰ã€‚è¿™çš„ç¡®åªæ˜¯ä¸€ä¸ªå°çš„ä¸èƒ½å†å°çš„é¡¹ç›®ä»£ç é‡äº†ï¼Œä½†å¯¹äºæ²¡å¤šå°‘é¡¹ç›®ç»éªŒçš„yzjæ¥è¯´ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªå€¼å¾—ä¸€æçš„æŒ‘æˆ˜ã€‚è¿™ä¹Ÿæé†’äº†yzjï¼Œè¿˜æ˜¯è¦æ³¨æ„é¡¹ç›®ç»éªŒçš„ç§¯ç´¯ã€‚</p>
<p>æ®yzjè¡¨ç¤ºï¼Œå½“ä»–ç‚¹å‡»äº†é‚®ç®±ç•Œé¢é‚£ä¸ªå°å°çš„ã€å‘é€ã€‘æŒ‰é’®ï¼Œåªè§‰å¾—æµ‘èº«çš„è´Ÿæ‹…ä¸€æ‰«è€Œç©ºã€‚ä»–å‡ ä¹åœ¨ä¸€ç¬é—´å°±å¿˜æ‰äº†å‘ç°è‡ªå·±æ²¡åŠæ³•å®ç°å¤§ä½œä¸šå…¶ä»–è¦æ±‚æ—¶çš„æ‡Šæ¼ã€‚è¿™ä¹Ÿè®©ä»–æœ‰ç‚¹æƒ³åˆ°ï¼Œè®©è‡ªå·±è¿™ä¹ˆå¤šå¤©ç†¬å¤œå’Œè‡ªé—­çš„å‹åŠ›ç©¶ç«Ÿæ¥è‡ªäºå“ªé‡Œã€‚</p>
<p>ä¸€èº«è½»åï¼Œyzjè¿˜æ˜¯æ²¡æœ‰ä»€ä¹ˆç¡æ„ï¼Œäºæ˜¯æ‰“å¼€äº†ä¸€ä¸ªæ–‡æ¡£ï¼Œæƒ³è®°å½•ä¸€ä¸‹è‡ªå·±çš„å¿ƒæƒ…ã€‚yzjåˆšé€‰ä¸Šè¯¾æ—¶ï¼Œè¿™é—¨è¯¾çš„è€å¸ˆå°±æ›¾æé†’è¿‡å¤§å®¶ï¼Œè¿™é—¨è¯¾æ¯”è¾ƒéš¾ï¼Œéœ€è¦ä»˜å‡ºæ›´å¤šçš„åŠªåŠ›ï¼Œä¹Ÿéšä¹‹èƒ½å¤Ÿè·å¾—æ›´å¤šçš„æ”¶è·ã€‚åœ¨ä¸Šè¯¾çš„è¿‡ç¨‹ä¸­ï¼Œyzjçš„ç¡®æ„Ÿå—åˆ°äº†è¿™é—¨è¯¾è€å¸ˆæƒ³è¦ä¼ é“æˆä¸šçš„è‹¦å¿ƒã€‚ä»–ä¸€éåˆä¸€éåœ°å‘å¤§å®¶é˜è¿°é“ï¼šâ€œæ•°å­¦æ˜¯ç¾çš„ï¼Œå­¦æ•°å­¦æ˜¯æ¢å¯»ç¾å‘ç°ç¾çš„è¿‡ç¨‹ï¼Œè€Œéæ­»è®°ç¡¬èƒŒçš„è¿‡ç¨‹ã€‚â€ç„¶è€Œå¥ˆä½•yzjæ„šä¸”é²ï¼Œä¸èƒ½ä½“ä¼šåˆ°æ‰€è°“çš„æ•°å­¦ä¹‹ç¾ã€‚ä½†åœ¨åšè¿™é—¨å¤§ä½œä¸šçš„è¿‡ç¨‹ä¸­yzjç¡®å®å­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ã€‚æœ‰äº†ä¸€ä¸ªä»£ç é‡åˆé€‚çš„å¯ä»¥è®­ç»ƒè‡ªå·± C++ programing language çš„æœºä¼šï¼Œä¹Ÿäº†è§£äº†ä¸€äº›å’Œç¼–è¯‘å™¨çŸ¥è¯†ï¼Œå¯ä»¥å’Œæ›´åº•å±‚çš„ä¸œè¥¿æ‰“äº¤é“ã€‚ä¹Ÿè¢«è€å¸ˆå®‰åˆ©äº†linuxç³»ç»Ÿå¹¶è¢«æ·±æ·±å¸å¼•ï¼ˆlinux ubuntuçœŸçš„è¶…çº§èµï¼Œéƒ½å»è¯•ï¼ï¼‰ã€‚ç„¶è€Œå­¦åˆ°è¿™ä¹ˆå¤šä¸œè¥¿çš„è¿‡ç¨‹å´å¹¶éæ˜¯åœ¨è¯¾ç¨‹ä¸­ï¼Œè€Œæ˜¯åœ¨è‡ªå·±ç‹¬è‡ªåšå¤§ä½œä¸šçš„è¿‡ç¨‹ä¸­ã€‚è¿™ä¸ªè€å¸ˆçš„è§’è‰²æ›´åƒæ˜¯ä¸€ä¸ªé­ç­–è€…ï¼Œç”¨ä¸€é—¨æœ‰äº›è¶…çº²çš„å¤§ä½œä¸šä¿ƒä½¿yzjç»§ç»­å­¦ä¸‹å»ã€‚å—¯ï¼Œå…¶å®ä¹Ÿæœ‰æ¦œæ ·çš„ä½œç”¨ï¼Œå¯¹yzjæ¥è¯´ï¼Œè¿™ä¸ªè€å¸ˆèº«ä¸Šçš„è®¤çœŸï¼Œå’Œä»–å¯¹å¾…è‡ªå·±çƒ­çˆ±çš„ä¸œè¥¿æ—¶çš„æ€åº¦ç®€ç›´è‡ªå¸¦å…‰ç¯ã€‚</p>
<p><img src="https://res.cloudinary.com/dwy9slegd/image/upload/v1631114183/image-20210908211520814_reitge.png"></p>
<p>çº¦å‡Œæ™¨å››ç‚¹ï¼ŒåŒæ ·é€‰äº†è¿™ä¸ªè€å¸ˆè¯¾çš„å®¤å‹ä¹Ÿå®Œæˆäº†è‡ªå·±çš„å¤§ä½œä¸šã€‚ä»–æ‹äº†æ‹yzjçš„è‚©å¤´ï¼Œè½»è½»è¯´äº†å£°ï¼šâ€œæˆ‘å…ˆç¡äº†ã€‚â€yzjç‚¹äº†ç‚¹å¤´ã€‚çœ‹äº†çœ‹çª—å¤–ï¼Œå·²ç»æœ‰ç‚¹å¾®æ›¦çš„æ™¨å…‰äº†ã€‚é»æ˜é™æ‚„æ‚„çš„ï¼Œåªæœ‰å¶å°”ä¼ æ¥çš„æè½»å¾®çš„é¸Ÿé¸£ã€‚</p>
<p>åˆæ˜¯æ–°çš„ä¸€å¤©äº†ã€‚</p>
]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>informal essay</tag>
      </tags>
  </entry>
  <entry>
    <title>é“¾æ¥å™¨æŸ¥æ‰¾èŒƒå›´</title>
    <url>/2021/07/08/lian-jie-qi-cha-zhao-fan-wei/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="è§£å†³Visual-Studioçš„-LNK2019-å’Œ-LNK1120-é”™è¯¯"><a href="#è§£å†³Visual-Studioçš„-LNK2019-å’Œ-LNK1120-é”™è¯¯" class="headerlink" title="è§£å†³Visual Studioçš„ LNK2019 å’Œ LNK1120 é”™è¯¯"></a>è§£å†³Visual Studioçš„ LNK2019 å’Œ LNK1120 é”™è¯¯</h1><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>å†™äº†ä¸€ä¸ª text searching çš„ä»£ç ã€‚è¯¥ä»£ç è®¾è®¡äº†æ•°ä¸ªç±»ï¼Œå¹¶æœ‰ä¸€ä¸ª interface class é€šè¿‡æŒ‡å‘ base class çš„ shared_ptr é€šè¿‡ dynamic binding æ¥è¿è¡Œã€‚ç„¶è€Œç»“æ„è®¾è®¡çš„ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´æˆ‘é‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜ï¼š</p>
<span id="more"></span>

<blockquote>
<p>interface class header fileï¼š</p>
<pre class=" language-cpp"><code class="language-cpp">std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> QueryResult <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<blockquote>
<p>interface class source file</p>
<pre class=" language-cpp"><code class="language-cpp">std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> QueryResult <span class="token operator">&amp;</span>query<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// details</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<blockquote>
<p>base class header file, which is included by interface class header file</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">QueryResult</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯æ¥æº</span>
        <span class="token keyword">friend</span> <span class="token keyword">inline</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> QueryResult <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//details</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<p>æ¥ç€åœ¨å°è¯•è¿è¡Œæ—¶å°±å‘ç°äº† <a href="https://docs.microsoft.com/zh-cn/cpp/error-messages/tool-errors/linker-tools-error-lnk2019?f1url=?appId=Dev16IDEF1&l=ZH-CN&k=k(LNK2019)&rd=true&view=msvc-160">LNK2019</a> å’Œ <a href="https://docs.microsoft.com/zh-cn/cpp/error-messages/tool-errors/linker-tools-error-lnk1120?f1url=?appId=Dev16IDEF1&l=ZH-CN&k=k(LNK1120)&rd=true&view=msvc-160">LNK1120</a> é”™è¯¯ã€‚ä»¥ä¸‹ä¸ºé”™è¯¯æè¿°ï¼š</p>
<blockquote>
<p>æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å· â€œclass std::basic_ostream&lt;char,struct std::char_traits<char> &gt; &amp; __cdecl operator&lt;&lt;(class std::basic_ostream&lt;char,struct std::char_traits<char> &gt; &amp;,class QueryResult const &amp;)â€ (??6@YAAEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AEAV01@AEBVQueryResult@@@Z)ï¼Œå‡½æ•° main ä¸­å¼•ç”¨äº†è¯¥ç¬¦å·</char></char></p>
</blockquote>
<h2 id="å°è¯•åˆ†æ"><a href="#å°è¯•åˆ†æ" class="headerlink" title="å°è¯•åˆ†æ"></a>å°è¯•åˆ†æ</h2><p>æ ¹æ®é”™è¯¯æè¿°ï¼Œå¯ä»¥é”å®šé”™è¯¯å‡ºè‡ªä¸Šé¢çš„ç¬¬ä¸€è¡Œä»£ç ã€‚Visual Studioç»™å‡ºçš„é”™è¯¯æ˜¯æ— æ³•è§£æï¼Œè¿™æ ·ä¸€ä¸ªé”™è¯¯æè¿°æœ‰äº›å®½æ³›ï¼Œæ”¾åˆ° dev cpp é‡Œå°±ä¼šå¥½å¾—å¤šï¼Œå®ƒçš„é”™è¯¯æç¤ºé•¿ä¸‹é¢è¿™æ ·å­ï¼š</p>
<blockquote>
<p>[è­¦å‘Š] inline å‡½æ•° â€˜std::ostream&amp; è¿ç®—ç¬¦&lt;&lt;(std::ostream&amp;, const QueryResult&amp;)â€™ used but never defined</p>
</blockquote>
<p>ç„¶è€Œæˆ‘ä¸€å¼€å§‹å¹¶æ²¡æœ‰ç”¨ dev ï¼Œè€Œæ˜¯è‡ªå·±çœ‹ web è°ƒäº†åŠå¤©ï¼Œè¿˜æ‰¾äº†æˆ‘çš„ä¸¤ä¸ªåŒå­¦å¸®æˆ‘çœ‹äº†ä¸€ä¸‹ã€‚ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠŠ source file ç»™ include è¿›æ¥ï¼ˆè¿™ä¹Ÿè®©æˆ‘æœ‰ç‚¹åƒæƒŠï¼Œä¸ºä»€ä¹ˆå¤§äºŒçš„è®¡ç§‘åŒå­¦ä¼šæ²¡æœ‰ package çš„æ¦‚å¿µï¼‰ã€‚è¿™æ ·çš„æ–¹æ¡ˆæˆ‘æ˜¾ç„¶æ²¡åŠæ³•æ»¡æ„ï¼Œæˆ‘æ— æ³•ç†è§£ï¼Œä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¼šæ‰¾ä¸åˆ°ä¸€ä¸ªå·²ç» declaration å¹¶ä¸” defining çš„å‡½æ•°ã€‚å‡ºäºè¿™ç§ç–‘æƒ‘ï¼Œæˆ‘å‹å–„åœ°æé†’äº†ä¸€ä¸‹ç¼–è¯‘å™¨â€”â€”äº§ç”Ÿäº†æˆ‘çš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<blockquote>
<p>interface class header fileï¼š</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">extern</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> QueryResult <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<p>ä¸å¾—ä¸è¯´vsçš„ MSVC ç¼–è¯‘å™¨æ˜¯çœŸçš„å¼ºå¤§ï¼ŒåŠ ä¸ª extern å°±èƒ½è”æƒ³åˆ°åŒåçš„inlineå‡½æ•°ã€‚å¦‚æœæˆ‘æ²¡æœ‰å†™è¿™ä¸ªblogçš„è¯ï¼Œæˆ‘ä¹Ÿè®¸ä¼šæ²¾æ²¾è‡ªå–œäºè¿™ä¸ªè§£å†³æ–¹æ¡ˆå¹¶ä¸”ä¾ç„¶æƒ³ç ´å¤´çš®éƒ½æƒ³ä¸æ˜ç™½ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é”™è¯¯ã€‚ç›´åˆ°æˆ‘ä¸ºäº†éªŒè¯è¿™ä¸ªé”™è¯¯ç”¨ dev ä¸Šåˆè·‘äº†ä¸€éã€‚æˆ‘çš„ dev ç¼–è¯‘å™¨æ˜¯ g++ ï¼ˆç‰ˆæœ¬æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå°ç™½éƒ½æ˜¯ä¸€é”®è£…ç¯å¢ƒçš„ï¼‰ï¼Œæ²¡æœ‰è¿™ä¹ˆæ™ºèƒ½ï¼Œå¾ˆå®è¯šåœ°æé†’äº†æˆ‘ã€‚ç”±äº <code>operator&lt;&lt;</code> å‡½æ•°éœ€è¦è°ƒç”¨ QueryResult object çš„ members ï¼Œå†åŠ ä¸Šè¿™ä¸ªå‡½æ•°æœ€å¼€å§‹æ˜¯åœ¨base_Query.h é‡Œ declaration çš„ï¼Œä¸”æˆ‘çš„ Query.h has included the base_Query.hï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æ‰¾åˆ°äº† inline ç‰ˆæœ¬çš„ declaration ï¼Œè€Œå¾ˆä¸å¹¸ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘æ²¡æœ‰å®šä¹‰ã€‚äºæ˜¯ï¼Œæˆ‘å¾—åˆ°äº†ç¬¬äºŒä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<blockquote>
<p>base class header file, which is included by interface class header file</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">QueryResult</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//è¯¥æ–‡ä»¶å‰é¢çš„ declaration ä¹Ÿè¦æ”¹</span>
        <span class="token keyword">friend</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> QueryResult <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//details</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<p>é¡ºä¾¿æä¸€ä¸‹æˆ‘çš„ä¸‹ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨ base_Query.h é‡ŒåŠ ä¸Š inline å¹¶ä¸”åœ¨åé¢çš„æ–‡ä»¶é‡Œå¿˜è®°å‘¢ï¼Ÿ</p>
<p>æ­¤äº‹è¯´æ¥è¯é•¿ã€‚æˆ‘çš„C++æ˜¯ä»ã€ŠC++ Primerã€‹å…¥é—¨çš„ã€‚åœ¨è¿™æœ¬ä¹¦é‡Œï¼Œ Lippman å¾ˆç»†è‡´åœ°è®²è¿°äº† inline çš„ä½œç”¨ï¼ˆä¹Ÿå°±æ˜¯æ²¡å•¥ä½œç”¨ï¼‰ï¼Œä½†ä»–çš„ç¤ºä¾‹ä»£ç é‡Œè¿˜æ˜¯ä¼šä¹ æƒ¯æ€§åœ°å¸¦ä¸Š inline ï¼Œè¿™ä¸ªä¹ æƒ¯ä¹Ÿå½±å“åˆ°äº†æˆ‘ã€‚äº‹å®ä¸Šï¼Œæˆ‘åŸæ¥çš„ source file é‡Œå…¨éƒ¨åŠ äº† inline declaration ï¼Œè¿™ä½¿å¾—æˆ‘ä¸€å¼€å§‹é‡åˆ°çš„é”™è¯¯æ¯”ç°åœ¨å¤šå¾—å¤šâ€”â€”ä¹ŸåŒæ ·å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæˆ‘åªæœ‰å°† interface class source file ä¹Ÿ include è¿›æ¥æ‰èƒ½å·¥ä½œã€‚åæ¥ä¸€ä¸ªåŒå­¦åœ¨ STFW ï¼ˆSearching The Fucking Webï¼‰åå‘Šè¯‰æˆ‘åˆ†ç¦»å¼ç¼–ç¨‹ä¸èƒ½ä½¿ç”¨ inline ã€‚ç„¶åè¿™ä¸ªå‡½æ•°æ˜¯å”¯ä¸€ä¸€ä¸ªå£°æ˜äº†ä¸¤æ¬¡çš„å‡½æ•°ï¼Œæ‰€ä»¥è¢«æˆ‘å¿˜è®°äº†ï¼ˆç¬‘ï¼‰ã€‚</p>
<p>å…³äºä¸ºä»€ä¹ˆåˆ†ç¦»å¼ç¼–ç¨‹ä¸èƒ½ä½¿ç”¨inlineå¯ä»¥çœ‹<a href="https://www.cnblogs.com/GodA/p/6554591.html">è¿™é‡Œ</a>ï¼Œè¿™ä¸ªä½œè€…è®²å¾—éå¸¸ç»†è‡´ã€‚ä¹Ÿå¸Œæœ›æˆ‘æœ‰ä¸€å¤©èƒ½å¤Ÿå˜æˆè¿™æ ·çš„å†…å®¹è¾“å‡ºè€…ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¬”è®°</category>
        <category>codingè¿‡ç¨‹ä¸­è¸©è¿‡çš„å‘</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>debug</tag>
      </tags>
  </entry>
</search>
