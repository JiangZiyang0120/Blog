{"title":"C++ learning notes","uid":"d8700b58c823e4fb5236b7c42730f1ee","slug":"C++ learning notes","date":"2021-05-25T06:00:00.000Z","updated":"2022-01-17T08:54:00.000Z","comments":true,"path":"api/articles/C++ learning notes.json","keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h1 id=\"C-learning-notes\"><a href=\"#C-learning-notes\" class=\"headerlink\" title=\"C++ learning notes\"></a>C++ learning notes</h1><h2 id=\"Generic-algorithm\"><a href=\"#Generic-algorithm\" class=\"headerlink\" title=\"Generic algorithm\"></a>Generic algorithm</h2><h3 id=\"lambda\"><a href=\"#lambda\" class=\"headerlink\" title=\"lambda\"></a>lambda</h3><p>[capture list] (parameter list) -&gt; return type {function body}</p>\n<p>we can ignore the <em>parameter list</em> and <em>return type</em>, but the <em>capture list</em> and the <em>function body</em> must be reserved</p>\n<p>eg:</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> string <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> string <span class=\"token operator\">&amp;</span>b<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"dynamic-memory\"><a href=\"#dynamic-memory\" class=\"headerlink\" title=\"dynamic memory\"></a>dynamic memory</h2><h3 id=\"shared-ptr-lt-gt\"><a href=\"#shared-ptr-lt-gt\" class=\"headerlink\" title=\"shared_ptr&lt;&gt;\"></a>shared_ptr&lt;&gt;</h3><p>use function make_shared&lt;&gt;()</p>\n<h3 id=\"unique-ptr-lt-gt\"><a href=\"#unique-ptr-lt-gt\" class=\"headerlink\" title=\"unique_ptr&lt;&gt;\"></a>unique_ptr&lt;&gt;</h3><p>must be initialized once the pointer is created</p>\n<h3 id=\"weak-ptr-lt-gt\"><a href=\"#weak-ptr-lt-gt\" class=\"headerlink\" title=\"weak_ptr&lt;&gt;\"></a>weak_ptr&lt;&gt;</h3><p>can be assigned</p>\n<h3 id=\"allocator\"><a href=\"#allocator\" class=\"headerlink\" title=\"allocator\"></a>allocator</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">allocator<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> alloc<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">auto</span> <span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> alloc<span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nweak_ptr<span class=\"token operator\">&lt;</span>string<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> q <span class=\"token operator\">=</span> p<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">!=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    alloc<span class=\"token punctuation\">.</span><span class=\"token function\">construct</span><span class=\"token punctuation\">(</span>q<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">!=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\tcout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nalloc<span class=\"token punctuation\">.</span><span class=\"token function\">deallocate</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">delete</span> p<span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//provided p points to an object or be nullptr</span>\n<span class=\"token keyword\">delete</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> p<span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//provided p points to an array or be nullptr</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></blockquote>\n<h2 id=\"Copy-Assign-and-Destroy\"><a href=\"#Copy-Assign-and-Destroy\" class=\"headerlink\" title=\"Copy, Assign and Destroy\"></a>Copy, Assign and Destroy</h2><h3 id=\"specific-member-function-to-control-above-three-operations\"><a href=\"#specific-member-function-to-control-above-three-operations\" class=\"headerlink\" title=\"specific member function to control above three operations\"></a>specific member function to control above three operations</h3><p>copy constructor</p>\n<p>copy-assignment operator</p>\n<p>move constructor</p>\n<p>move-assignment operator</p>\n<p>destructor</p>\n<h3 id=\"copy-constructor\"><a href=\"#copy-constructor\" class=\"headerlink\" title=\"copy constructor\"></a>copy constructor</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    \t<span class=\"token comment\">/*\n    \t*default defination in class body is inline\n    \t*if we don't hope so, we need to define \"= default\" out of the class body\n    \t*generally, function defined in class body is inline\n    \t*/</span>\n    \t<span class=\"token function\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//default constructor</span>\n\t\t<span class=\"token function\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> Foo<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//copy constructor</span>\n    \t<span class=\"token comment\">//first parameter must be a reference, and almost always be a const reference</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo2</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    \t<span class=\"token comment\">//explicit prevents implicit conversion</span>\n    \t<span class=\"token keyword\">explicit</span> <span class=\"token function\">Foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">explicit</span> <span class=\"token function\">Foo2</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token function\">n</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    \t<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"copy-assignment-constructor\"><a href=\"#copy-assignment-constructor\" class=\"headerlink\" title=\"copy-assignment constructor\"></a>copy-assignment constructor</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token comment\">/*\n\t\t*we define a copy-assignment constructor below\n    \t*keyword operator+symbol is an overloaded operator\n    \t*which defines an operator(like =,+,- and so on)\n    \t*/</span>\n\t\tFoo <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> Foo<span class=\"token operator\">&amp;</span> f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">this</span><span class=\"token operator\">-></span>n <span class=\"token operator\">=</span> f<span class=\"token operator\">-></span>n<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    Foo f1<span class=\"token punctuation\">,</span> <span class=\"token function\">f2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//f2 is default initialized</span>\n    f1 <span class=\"token operator\">=</span> f2<span class=\"token punctuation\">;</span> <span class=\"token comment\">//equals to f1(f2)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"stop-the-copy\"><a href=\"#stop-the-copy\" class=\"headerlink\" title=\"stop the copy\"></a>stop the copy</h4><p>if we don’t want a copy operation, we need to define it as the <strong>delete function</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">NoCopy</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n        <span class=\"token function\">NoCopy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">/*\n        *\"= delete\" must be present when we firstly declare it.\n        *\n        *by the way, we can delete any functions(except the destructor),\n        *thongh i haven't clearly understood its effect and affect.\n        *one interesting and meaningful example is, if a class's member\n        *can't be implicitly initialized, copied, assigned or destroied,\n        *its implicit initializer's member function is deleted.\n        *It prevents from creating indestructible object.\n        *\n        *principle: destructor can't be delete\n        */</span>\n        <span class=\"token function\">NoCopy</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> NoCopy <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">delete</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//stop the copy</span>\n        NoCopy <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> NoCopy <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">delete</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//stop the copy-assignment</span>\n        <span class=\"token operator\">~</span><span class=\"token function\">NoCopy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">/*\n        *we can put the copy constructor into private zone to prevent from copying it.\n        *we need to declare it in the private zone first\n        *then define it in the public zone.(in order to prevent friend use it)\n        *however, this practice is not recommended.\n        */</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"destructor\"><a href=\"#destructor\" class=\"headerlink\" title=\"destructor\"></a>destructor</h3><p>destructor delete the resource used by objects, and destruct non-static elements</p>\n<p>it is used whenever the object is destroyed</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>implicitly destruct a pointer won’t delete the object it points.</p>\n<p>on the contrary, smart pointer is class type with destructor, thus it can delete the object</p></blockquote>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token operator\">~</span><span class=\"token function\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//destructor.this function can't be overloaded</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"principle\"><a href=\"#principle\" class=\"headerlink\" title=\"principle\"></a>principle</h4><ul>\n<li>define destructor before assuring weather it needs a destructor or not</li>\n<li>if a class needs a copy constructor, it always need a copy-assignment constructor. And vice verse</li>\n</ul>\n<h3 id=\"copy-control-and-resource-management\"><a href=\"#copy-control-and-resource-management\" class=\"headerlink\" title=\"copy control and resource management\"></a>copy control and resource management</h3><p>behave like a value: the copy and the original object is fully independent</p>\n<p>behave like a pointer: the copy and the original object point to the same underlying data</p>\n<h4 id=\"classes-which-behave-like-a-value\"><a href=\"#classes-which-behave-like-a-value\" class=\"headerlink\" title=\"classes which behave like a value\"></a>classes which behave like a value</h4><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HasPtr</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> std<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">&amp;</span>s <span class=\"token operator\">=</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token function\">ps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">i</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\">//every HasPtr's copy has its own string member with equal value</span>\n\t\t<span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span>p<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token function\">ps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">i</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\">/*\n\t\t*most copy assignment constructor combines the function\n\t\t*of destructor and copy constructor.\n\t\t*\n\t\t*for instance, copy assignment constructor\n\t\t*destroys the left side object's resource as destructor,\n\t\t*and copies data from the right side object\n\t\t*to the left one like copy constructor\n\t\t*\n\t\t*if possible, copy assignment constructor should be exception safe.\n\t\t*which means when an exception occurs,\n\t\t*it can put the left side object in a meaningful state\n\t\t*/</span>\n\t\tHasPtr <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token operator\">~</span><span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">delete</span> ps<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">*</span>ps<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n*in this case, to ensure exception safety,\n*we copy the right object's data first\n*to ensure exception safety before assignment.\n*then we delete the resource of the left object and execute assignment\n*/</span>\nHasPtr <span class=\"token operator\">&amp;</span>HasPtr<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span>rhs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">auto</span> newp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>rhs<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">delete</span> ps<span class=\"token punctuation\">;</span>\n\tps <span class=\"token operator\">=</span> newp<span class=\"token punctuation\">;</span>\n\ti <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"classes-which-behave-like-a-pointer\"><a href=\"#classes-which-behave-like-a-pointer\" class=\"headerlink\" title=\"classes which behave like a pointer\"></a>classes which behave like a pointer</h4><p>use reference count to control the underlying data</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HasPtr</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> std<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">&amp;</span>s <span class=\"token operator\">=</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token function\">ps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">i</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">size_t</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\">//copy the pointer to ensure they point to the same underlying data</span>\n\t\t<span class=\"token comment\">//increase the reference count</span>\n\t\t<span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span>p<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token function\">ps</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">i</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">use</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>use<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token operator\">++</span><span class=\"token operator\">*</span>use<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tHasPtr <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token operator\">~</span><span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">*</span>ps<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>size_t <span class=\"token operator\">*</span>use<span class=\"token punctuation\">;</span> <span class=\"token comment\">//reference count</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">HasPtr</span><span class=\"token double-colon punctuation\">::</span><span class=\"token operator\">~</span><span class=\"token function\">HasPtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">--</span><span class=\"token operator\">*</span>use <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">delete</span> ps<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">delete</span> use<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nHasPtr <span class=\"token operator\">&amp;</span>HasPtr<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> HasPtr <span class=\"token operator\">&amp;</span>rhs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token operator\">++</span><span class=\"token operator\">*</span>rhs<span class=\"token punctuation\">.</span>use<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//execute the left object's destructor</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">--</span><span class=\"token operator\">*</span>use <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">delete</span> ps<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">delete</span> use<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token comment\">//execute assignment</span>\n\tps <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">;</span>\n\ti <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">;</span>\n\tuse <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>use<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"swap\"><a href=\"#swap\" class=\"headerlink\" title=\"swap\"></a>swap</h3><p>we can swap the pointer to decrease extra memory allocation</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HasPtr</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">friend</span> <span class=\"token keyword\">void</span> <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>HasPtr <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> HasPtr <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">/*\n*if a menber of a class has its own swap function,\n*use the std::swap is an error\n*and if we implicitly use swap function, the compiler use the overloaded one by default\n*/</span>\n<span class=\"token keyword\">inline</span> <span class=\"token keyword\">void</span> <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>HasPtr <span class=\"token operator\">&amp;</span>lhs<span class=\"token punctuation\">,</span> HasPtr <span class=\"token operator\">&amp;</span>rhs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">using</span> std<span class=\"token double-colon punctuation\">::</span>swap<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>lhs<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">,</span>rhs<span class=\"token punctuation\">.</span>ps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>lhs<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">,</span> rhs<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    HasPtr <span class=\"token function\">h1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">h2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">using</span> std<span class=\"token double-colon punctuation\">::</span>swap<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>h1<span class=\"token punctuation\">,</span>h2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//use the overloaded one</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//tip:this function can't overload the HasPtr &amp;HasPtr::operator=(HasPtr &amp;rhs)</span>\nHasPtr <span class=\"token operator\">&amp;</span>HasPtr<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>HasPtr rhs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//parameter is a copy, not a reference</span>\n    <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> rhs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//rhs is destroyed</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"move-constructor\"><a href=\"#move-constructor\" class=\"headerlink\" title=\"move constructor\"></a>move constructor</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>library container, string and shared_ptr class support both move and copy operation</p>\n<p>IO class and unique_ptr class can be moved, but can’t be copied</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>rvalue reference must be bound to an rvalue. we get rvalue reference through &amp;&amp; instead of &amp;</p>\n<p>rvalue reference must be bound to an object ready to be destroyed</p>\n<p>therefore, we can freely move an rvalue reference resource to another object</p>\n<p>moreover, we can bound a const lvalue reference to an rvalue, as well</p>\n<p>expression returns an rvalue. But rvalue reference variate itself is a lvalue</p>\n<p>eg:</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>r <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>r2 <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;&amp;</span>r3 <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;&amp;</span>r4 <span class=\"token operator\">=</span> r3<span class=\"token punctuation\">;</span> <span class=\"token comment\">//illegal</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>all of them is legal except the last one</p></blockquote>\n<p>std::move avails to use a lvalue as an rvalue. What’s more, we must recognize that executing move means we promote not to use the original element unless we assign or destruct it.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;&amp;</span>r4 <span class=\"token operator\">=</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span>r3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//legal</span>\n<span class=\"token comment\">//use std::move instead of move in order to prevent from potential naming conflict</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>an example of move constructor</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token class-name\">StrVec</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">StrVec</span><span class=\"token punctuation\">(</span>StrVec <span class=\"token operator\">&amp;&amp;</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">noexcept</span> <span class=\"token comment\">//move operation shouldn't throw error</span>\n<span class=\"token comment\">//initializer take over resource of s</span>\n\t<span class=\"token operator\">:</span> <span class=\"token function\">elements</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">first_feet</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>first_feet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">cap</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>cap<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\ts<span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>first_feet <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>cap <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">;</span> \n        \t\t\t\t\t\t\t<span class=\"token comment\">//brilliant!</span>\n        \t\t\t\t\t\t\t<span class=\"token comment\">//get the spark of controlling dynamic memory!</span>\n\t<span class=\"token comment\">//now destructing s is safe</span>\n    <span class=\"token comment\">//i wander weather we permit s to be meaningfully assigned, </span>\n    <span class=\"token comment\">//and after insperation, i find that void StrVec::push_back(const std::string &amp;)</span>\n    <span class=\"token comment\">//has considered this situation. Now both assignment and destruction is ligal.</span>\n    <span class=\"token comment\">//and at the same time we can't read its value</span>\n    <span class=\"token comment\">//(certainly i put the whole code into my cpp file to avoid making my notes bloated)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"move-assignment-constructor\"><a href=\"#move-assignment-constructor\" class=\"headerlink\" title=\"move assignment constructor\"></a>move assignment constructor</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">StrVec <span class=\"token operator\">&amp;</span>StrVec<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>StrVec <span class=\"token operator\">&amp;&amp;</span>rhs<span class=\"token punctuation\">)</span> <span class=\"token keyword\">noexcept</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//check self-assignment</span>\n\t<span class=\"token comment\">//I guess this operation is designed to avoid freeing itself</span>\n\t<span class=\"token comment\">//otherwise it may move meaningless data and put itself in a meaningless state</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">&amp;</span>rhs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token function\">free</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//release itself</span>\n\t\telements <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">;</span>\n\t\tfirst_feet <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>first_feet<span class=\"token punctuation\">;</span>\n\t\tcap <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>cap<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">//put rhs in a destructible state</span>\n\t\trhs<span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>first_feet <span class=\"token operator\">=</span> rhs<span class=\"token punctuation\">.</span>cap <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//copy and move operation's overload</span>\nStrVec v1<span class=\"token punctuation\">,</span> v2<span class=\"token punctuation\">;</span>\nv1 <span class=\"token operator\">=</span> v2<span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">//copy assignment constructor</span>\nStrVec <span class=\"token function\">getVec</span><span class=\"token punctuation\">(</span>istream <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//getVec returns an rvalue</span>\n\t\t\t\t\t\t\t<span class=\"token comment\">//because getVec() dosen't return value instead of reference</span>\n\t\t\t\t\t\t\t<span class=\"token comment\">//up to now getVec() is just a declaration</span>\n\nv2 <span class=\"token operator\">=</span> <span class=\"token function\">getVec</span><span class=\"token punctuation\">(</span>cin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\">//move assignment constructor</span>\n<span class=\"token comment\">/*\n*if we didn't define a move constructor\n*the compiler will convert an rvalue reference to a const reference\n*and call copy constructor\n*/</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"reference-qualifier\"><a href=\"#reference-qualifier\" class=\"headerlink\" title=\"reference qualifier\"></a>reference qualifier</h3><p>C++ permit us to assign value to a rvalue object(so weird)</p>\n<p>eg:</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">string <span class=\"token function\">s1</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">s2</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token char\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \t<span class=\"token comment\">//s1 = \"a\", s2 = \"bbb\";</span>\n<span class=\"token comment\">/*\n*(s1 + s2) is an rvalue which never affects s1 and s2's value without assignment\n*usually it is created by compiler and released soon\n*the following expression execute:\n*\tcreate a string temp_s = s1 + s2 = \"abbb\";\n*\tassign \"Wow\" to temp_s and return \"Wow\";\n*\tassign \"Wow\" to s3;\n* \trelease temp_s\n*Just from my own guess.If there's something wrong, I'll correct it\n*/</span>\nstring s3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s1 <span class=\"token operator\">+</span> s2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Wow\"</span><span class=\"token punctuation\">;</span>\ncout <span class=\"token operator\">&lt;&lt;</span> s3 <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>we can use the reference qualifier to enforce the left object is an lvalue or an rvalue</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token comment\">//the &amp; in the back of parameter list enforce the left object is an lvalue</span>\n\t\tFoo <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> Foo<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">;</span> \n\t<span class=\"token comment\">//</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nFoo <span class=\"token operator\">&amp;</span>Foo<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> Foo<span class=\"token operator\">&amp;</span> rhs<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    \tFoo <span class=\"token function\">someMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//const should be in front of reference qualifier</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>reference qualifier and overloaded</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\tFoo <span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span><span class=\"token punctuation\">;</span>\n\t\tFoo <span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\tvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//because object is an rvalue, we can change itself without any affection</span>\nFoo <span class=\"token class-name\">Foo</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span><span class=\"token punctuation\">&#123;</span> \n\t<span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//object is an lvalue, thus we can't affect its value</span>\nFoo <span class=\"token class-name\">Foo</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">&#123;</span>\n\tFoo <span class=\"token function\">temp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> temp<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> temp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"overloading-and-type-conversion\"><a href=\"#overloading-and-type-conversion\" class=\"headerlink\" title=\"overloading and type conversion\"></a>overloading and type conversion</h2><h3 id=\"basic-concept\"><a href=\"#basic-concept\" class=\"headerlink\" title=\"basic concept\"></a>basic concept</h3><ul>\n<li><p>an operator function should be a member of a class or have at least than one class type parameter</p>\n</li>\n<li><p>which means we can’t overload operators acting on the build-in type</p>\n</li>\n<li><p>overloaded operator’s priority and associative law is the same as the original operator</p>\n</li>\n</ul>\n<p><strong>operators can be overloaded</strong></p>\n<table>\n<thead>\n<tr>\n<th>+</th>\n<th>-</th>\n<th>*</th>\n<th>&#x2F;</th>\n<th>%</th>\n<th>^</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>&amp;</td>\n<td></td>\n<td></td>\n<td>~</td>\n<td>!</td>\n<td>,</td>\n<td>&#x3D;</td>\n</tr>\n<tr>\n<td>&lt;</td>\n<td>&gt;</td>\n<td>&lt;&#x3D;</td>\n<td>&gt;&#x3D;</td>\n<td>++</td>\n<td>–</td>\n<td></td>\n</tr>\n<tr>\n<td>&lt;&lt;</td>\n<td>&gt;&gt;</td>\n<td>&#x3D;&#x3D;</td>\n<td>!&#x3D;</td>\n<td>&amp;&amp;</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>+&#x3D;</td>\n<td>-&#x3D;</td>\n<td>&#x2F;&#x3D;</td>\n<td>%&#x3D;</td>\n<td>^&#x3D;</td>\n<td>&amp;&#x3D;</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>&#x3D;</td>\n<td>*&#x3D;</td>\n<td>&lt;&lt;&#x3D;</td>\n<td>&gt;&gt;&#x3D;</td>\n<td>[]</td>\n<td>()</td>\n</tr>\n<tr>\n<td>-&gt;</td>\n<td>-&gt;*</td>\n<td>new</td>\n<td>new[]</td>\n<td>delete</td>\n<td>delete[]</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><strong>operators can not be overloaded</strong></p>\n<table>\n<thead>\n<tr>\n<th>::</th>\n<th>.*</th>\n<th>.</th>\n<th>? :</th>\n</tr>\n</thead>\n</table>\n<h3 id=\"operators\"><a href=\"#operators\" class=\"headerlink\" title=\"operators\"></a>operators</h3><p>there are various of operators overloading practice. and you know, <em>cujus rei demonstrationem mirabilem sane detexi. Hanc marginis exiguitas non caperet</em>.(I’m sure I’ve discovered a wonderful demonstration, but the space here is too small to fill it). so I write them all down in my practice .cpp file and just note some announcements there.</p>\n<p>The essence of operator overloading is a function call. therefore we can’t save  the original order of evaluation and the short circuit evaluation. and that’s why we don’t advice you to overload comma, address, logic and, logic or.</p>\n<p>when we define an operator as a member function, its left operand must be an object of the operator’s class.</p>\n<p>operator(&#x3D;), index([]), call(()), member accession(-&gt;) operator must be member function of class.</p>\n<p>ostream(&lt;&lt;), istream(&gt;&gt;) can’t be member function.</p>\n<p>index operator usually define two overloading versions, the const one and the nonconst one.</p>\n<p>increase and decrease operators usually be set as member functions.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">strBlobPtr <span class=\"token operator\">&amp;</span><span class=\"token keyword\">operator</span><span class=\"token operator\">++</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//preoperator</span>\nstrBlobPtr <span class=\"token keyword\">operator</span><span class=\"token operator\">++</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//postoperator</span>\n\nstrBlobPtr strBlobPtr<span class=\"token double-colon punctuation\">::</span><span class=\"token keyword\">operator</span><span class=\"token operator\">++</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\tstrBlobPtr ret <span class=\"token operator\">=</span> <span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">++</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> ret<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>if we overload the call operator, the object of this class is called function object, because we can call this object. function object is usually used as actual parameter of generic algorithm. moreover, <a href=\"https://blog.csdn.net/YangZejia0120/article/details/118713608?spm=1001.2014.3001.5501\"><strong>lambda</strong></a> is an unnamed class’ unnamed object, whose call operator is overloaded by lambda’s function body.</p>\n<p>liberty <strong>functional</strong> defines a succession of function class as templates. and they are listed below.</p>\n<table>\n<thead>\n<tr>\n<th>arithmetic</th>\n<th>relation</th>\n<th>logic</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>plus<Type></Type></td>\n<td>equal_to<Type></Type></td>\n<td>logical_and<Type></Type></td>\n</tr>\n<tr>\n<td>minus<Type></Type></td>\n<td>not_equal_to<Type></Type></td>\n<td>logical_or<Type></Type></td>\n</tr>\n<tr>\n<td>multiplies<Type></Type></td>\n<td>greater<Type></Type></td>\n<td>logical_not<Type></Type></td>\n</tr>\n<tr>\n<td>divides<Type></Type></td>\n<td>greater_equal<Type></Type></td>\n<td></td>\n</tr>\n<tr>\n<td>modulus<Type></Type></td>\n<td>less<Type></Type></td>\n<td></td>\n</tr>\n<tr>\n<td>negate<Type></Type></td>\n<td>less_equal<Type></Type></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>operator <em>type</em>() const is class-type conversions or be named user-define conversions. it allows a type to be an object’s return type. this conversion is implicit.</p>\n<p>we can define explicit conversion operator to control class-type conversion.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SmallInt</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token function\">SmallInt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token function\">val</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">explicit</span> <span class=\"token keyword\">operator</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> val<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">operator</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">int</span> val<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nSmallInt si <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token generic-function\"><span class=\"token function\">static_cast</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>si<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//explicitly request for type conversion</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>however, if the conversion is used as a condition, the compiler will automatically execute the conversion.</p>\n<h3 id=\"function-table\"><a href=\"#function-table\" class=\"headerlink\" title=\"function table\"></a>function table</h3><p>function, function pointer, function class, lambda expression, classes built by bind and any other classes which has overloaded the call operator are all callable object. function class defined in liberty <strong>functional</strong> can be used to reserve callable object.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;functional></span></span>\n\nfunction<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span> f1 <span class=\"token operator\">=</span> add<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//f1(4,2) == 6; //equal to add(4,2);</span>\n<span class=\"token comment\">//f1 == true;\t//f1 has a callable object;</span>\nfunction<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span> f2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> i <span class=\"token operator\">*</span> j<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>we can define a function table to reserve callable objects with same <em>retType(args)</em>.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">map<span class=\"token operator\">&lt;</span>string<span class=\"token punctuation\">,</span> function<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>></span> binops <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> add<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\t<span class=\"token comment\">//each element is a pair</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span> <span class=\"token generic-function\"><span class=\"token function\">minus</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">divide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> i <span class=\"token operator\">*</span> j<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"%\"</span><span class=\"token punctuation\">,</span> mod<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//in this case, binos[\"+\"](4,2) == 6;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Object-Oriented-Programming\"><a href=\"#Object-Oriented-Programming\" class=\"headerlink\" title=\"Object-Oriented Programming\"></a>Object-Oriented Programming</h2><h3 id=\"inheritance\"><a href=\"#inheritance\" class=\"headerlink\" title=\"inheritance\"></a>inheritance</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Quote</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token function\">Quote</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">Quote</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> std<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">&amp;</span>book<span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span> sales_price<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token function\">bookNo</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">price</span><span class=\"token punctuation\">(</span>sales_price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>string <span class=\"token function\">isbn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">return</span> bookNo<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\">//key word virtual defines a virtual function</span>\n\t\t<span class=\"token comment\">//which means the base class permits drived classes to override it</span>\n\t\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">double</span> <span class=\"token function\">net_price</span><span class=\"token punctuation\">(</span>std<span class=\"token double-colon punctuation\">::</span>size_t n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">return</span> n <span class=\"token operator\">*</span> price<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n    \t<span class=\"token comment\">//moreover, if we don't wish our clients use the base class' member function</span>\n    \t<span class=\"token comment\">//we need to define this member function to be a pure virtual function as the following code row</span>\n    \t<span class=\"token comment\">//notice :the pure virtual function can only be defined in the declaration body</span>\n    \t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">double</span> <span class=\"token function\">net_price</span><span class=\"token punctuation\">(</span>std<span class=\"token double-colon punctuation\">::</span>size_t n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n\t\t<span class=\"token keyword\">virtual</span> <span class=\"token operator\">~</span><span class=\"token function\">Quote</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//dynamically bind destructor</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>string bookNo<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/*\n\t\t*key word protected serves for those members\n\t\t*which are not supposed to be used by object's users\n\t\t*but needed to be used by derived class\n\t\t*/</span>\n\t<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">double</span> price <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//common price without discount</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n*type of class derivation list:colon and a list of base class\n*whose type is base class behind optional assess specifire\n*and splited by comma\n*/</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Bulk_quote</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Quote</span></span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token function\">Buli_quote</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">Built_quote</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> std<span class=\"token double-colon punctuation\">::</span>string <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span><span class=\"token punctuation\">,</span> std<span class=\"token double-colon punctuation\">::</span>size_t<span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/*\n\t\t*key word override explicitly declare that this member function\n\t\t*will be used to redefine the base class' virtual function\n\t\t*if not, the compiler will throw error\n\t\t*/</span>\n\t\t<span class=\"token keyword\">double</span> <span class=\"token function\">net_price</span><span class=\"token punctuation\">(</span>std<span class=\"token double-colon punctuation\">::</span>size_t<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">override</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token comment\">//the minimum purchase quantity of discount</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>size_t min_qty <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">double</span> discount <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>because derived class has its base class member, compiler can implicitly convert it into its base class as a reference or pointer. On the contrary, compiler doesn’t allow us to implicitly convert base class object into derived class object. However, if we ensure this action’s safety, we can use <strong>static_cast</strong> enforce the conversion. But this action is not recommended. What’s more, if the base class has at least one virtual function, we can use <strong>dynamic_cast</strong> to check this conversion’s safety and let the compiler divides whether allow or not.</p>\n<p>if a base class defines a static member, the whole inheritance system has only one instance no matter how many derived classes and objects have been defined.</p>\n<p>base class must be defined before defining derived classes.</p>\n<p>key word <strong>final</strong> restrict us from using a class as base class. key word <strong>final</strong> can be used to declare that a virtual function is the final function, which means this function can’t be overrode.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">NoDerived</span> <span class=\"token keyword\">final</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//illegal, we can't use Noderived as a base class</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Bad</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">NoDerived</span></span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>virtual function can have acquiescent parameters, and its acquiescent parameters depend on the static type of the call.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Base</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">funcion</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Derived</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Base</span></span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">void</span> <span class=\"token function\">function</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">override</span><span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">execuse_function</span><span class=\"token punctuation\">(</span>Base <span class=\"token operator\">&amp;</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tb<span class=\"token punctuation\">.</span><span class=\"token function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tDerived d<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">execuse_function</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//execuse Base::function(int a = 0, int b = 1);</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"scope\"><a href=\"#scope\" class=\"headerlink\" title=\"scope\"></a>scope</h3><p><strong>notions:</strong></p>\n<ul>\n<li>iff the derived class publicly inherits base class can users use the conversions between derived class and base class.</li>\n<li>if the derived class publicly or protected inherits base class, the derived class can use the conversions.</li>\n<li>if the derived class privately inherits base class, the derived class’ objects and friends can’t use the conversions.</li>\n<li>friend relationship can’t be inherited.</li>\n<li><strong>each class controls its members’ accessible permissions.</strong></li>\n<li>if we need to change a member’s accessible permission, we can use the <em>using</em> declaration in the corresponding action scope</li>\n</ul>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Base</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>size_t <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span>size_t n<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//we inherit the base class in the private scope</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Derived</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">private</span> <span class=\"token class-name\">Base</span></span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token comment\">//then Base::size() is public </span>\n\t\t<span class=\"token keyword\">using</span> Base<span class=\"token double-colon punctuation\">::</span>size<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">using</span> Base<span class=\"token double-colon punctuation\">::</span>n<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>acquiescent derived scope operators depend on class’ type. struct acquiescently owns public scope while class having private scope.</p>\n<p>derived class’ scope is combined into base class’ scope. thus derived class’ member with the same name as base class’ has higher priority.</p>\n<p>name lookup precedes type lookup. function declared in the inner scope won’t override but cover the outer scope’s function.(which remind us to use the <em>override</em> key word. otherwise we must ensure that the derived class’s function has the same parameters list as the base class’)</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">Base</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">Derived</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token class-name\">Base</span></span><span class=\"token punctuation\">&#123;</span><span class=\"token comment\">//Base's scope operator is public</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nDerived d<span class=\"token punctuation\">;</span>\nBase b<span class=\"token punctuation\">;</span>\nb<span class=\"token punctuation\">.</span><span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nd<span class=\"token punctuation\">.</span><span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nd<span class=\"token punctuation\">.</span><span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//error:Base::memfunc() is hided. the right way is written below</span>\nd<span class=\"token punctuation\">.</span><span class=\"token class-name\">Base</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">memfunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"dynamic-binding\"><a href=\"#dynamic-binding\" class=\"headerlink\" title=\"dynamic binding\"></a>dynamic binding</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">double</span> <span class=\"token function\">print_total</span><span class=\"token punctuation\">(</span>ostream <span class=\"token operator\">&amp;</span>os<span class=\"token punctuation\">,</span>\n                   <span class=\"token keyword\">const</span> Quote <span class=\"token operator\">&amp;</span>item<span class=\"token punctuation\">,</span> size_t n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//calling Quote::net_price or Bulk_quote::net_price</span>\n\t<span class=\"token comment\">//depends on item's object type</span>\n    <span class=\"token comment\">//moreover, accessible members which we can use depend on the static type</span>\n    <span class=\"token comment\">//for instance, this item below has no right to use Bulk_quote's unique public members</span>\n\t<span class=\"token keyword\">double</span> ret <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span><span class=\"token function\">net_price</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tos <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"ISBN: \"</span> <span class=\"token operator\">&lt;&lt;</span> item<span class=\"token punctuation\">.</span><span class=\"token function\">isbn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t   <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"# sold: \"</span> <span class=\"token operator\">&lt;&lt;</span> n <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"total due: \"</span> <span class=\"token operator\">&lt;&lt;</span> ret <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> ret<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//if we don'y want to use dynamic binding, we need to explicitly declare the scope</span>\n<span class=\"token keyword\">double</span> ret <span class=\"token operator\">=</span> item<span class=\"token operator\">-></span><span class=\"token class-name\">Quote</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">net_price</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>now, we need to consider this situation where we delete a derived object pointed by a base class pointer. we must ensure that the delete command executes the derived object’s destructor. So we declare the base class’ destructor as a virtual function to solve this problem. what’s more, virtual destructor will impede generating movement operation.</p>\n<p>What’s more, if we use containers to save objects, it is supposed to indirectly save it. An common usage is using pointer. Then we are able to use base class pointer calling derived objects.</p>\n<h2 id=\"template\"><a href=\"#template\" class=\"headerlink\" title=\"template\"></a>template</h2><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> <span class=\"token comment\">//key word:template</span>\n  \t\t\t\t\t  <span class=\"token comment\">//&lt;template T> is template parameter list</span>\n\t\t\t\t\t  <span class=\"token comment\">//template parameters are divided by comma</span>\n<span class=\"token comment\">/*\n*moerover, key word typename is the same with key word class in this situation\n*/</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span> v1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span> v2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v1 <span class=\"token operator\">></span> v2<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v2 <span class=\"token operator\">&lt;</span> v1<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//type parameter can be used as return type or parameter type</span>\n<span class=\"token comment\">//it can be used as variables declaration and type translation, as well</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span>\nT <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>T<span class=\"token operator\">*</span> p<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\tT tmp <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>p<span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//omitted details</span>\n\t<span class=\"token keyword\">return</span> T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">/*\n*we can define nontype parameter and the parameter's value is provided by\n*clients or compiler\n*in this case, compiler provide nontype parameters int values depends on\n*const char array's length\n*nontype parameter can be int, object/function pointer or lvalue reference\n*/</span>\n<span class=\"token keyword\">template</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">unsigned</span> N<span class=\"token punctuation\">,</span> <span class=\"token keyword\">unsigned</span> M<span class=\"token operator\">></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>p2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>M<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span>p2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">/*\n*template can be declared as inline or constexpr\n*this declaration should be put between template parameter list and return type\n*/</span>\n<span class=\"token keyword\">template</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> <span class=\"token keyword\">inline</span> T <span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>principle</strong>: template function’s parameters are supposed to be const reference, which guarantees non-copyable object’s availability.</p>\n<p>if we want to define a class member function out of the class body, it’s type should be:</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">return</span><span class=\"token operator\">-</span>type <span class=\"token keyword\">class</span><span class=\"token operator\">-</span>name<span class=\"token double-colon punctuation\">::</span>member<span class=\"token operator\">-</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>parameter<span class=\"token operator\">-</span>list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>function<span class=\"token operator\">-</span>bod<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>By default, template class’ member function is instantiated when it is called, which help us to use a template class even though there are some member function incompatible with a type, we can use part of class functions.</p>\n<h3 id=\"friend-declaration\"><a href=\"#friend-declaration\" class=\"headerlink\" title=\"friend declaration\"></a>friend declaration</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//friend declaration</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">C</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal</span><span class=\"token operator\">&lt;</span>C<span class=\"token operator\">></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Pal instantiated by class C is a friend</span>\n\t<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> <span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//each instantiated Pal2 is C's friend</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">C2</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal</span><span class=\"token operator\">&lt;</span>T<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">X</span><span class=\"token operator\">></span> <span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal2</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//each instantiated Pal2 is each instantiated C2's friend</span>\n\t\t\t\t\t\t\t\t\t   <span class=\"token comment\">//notice: friend's typename should be different from template class'</span>\n\t<span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pal3</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Pal3 is a non-template class, every instantiated C2 is Pal3's friend</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//let template's typename as friend</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span><span class=\"token keyword\">class</span> <span class=\"token class-name\">C3</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">friend</span> T<span class=\"token punctuation\">;</span> <span class=\"token comment\">//type T is friend of C3 instantiated by T</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>if a template class contains static members, each type instantiated class has its own static members.</p>\n<p>if we access a type name from a template class, we need to use the key word <strong>typename</strong> to explicitly ask compiler treats the name as a type name.</p>\n<p>we can define default template argument, like code below.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span> <span class=\"token class-name\">F</span> <span class=\"token operator\">=</span> less<span class=\"token operator\">&lt;</span>T<span class=\"token operator\">>></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span> v1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T<span class=\"token operator\">&amp;</span> v2<span class=\"token punctuation\">,</span> F f<span class=\"token operator\">=</span><span class=\"token function\">F</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">,</span>v2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span>v2<span class=\"token punctuation\">,</span>v1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//even if all the parameters of a template's typename parameter list is default argued</span>\n<span class=\"token comment\">//we have to use angle brackets to ask compiler instantiate a class from a template</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">tmp_array</span><span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\ntmp_array<span class=\"token operator\">&lt;</span><span class=\"token operator\">></span> a<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>Besides, it is known that once we define a template class’ type, compiler instantiates a class instance. But this activity faces an embarrassing situation. Once we create a project and use template class with the same type in different file, the compiler will instantiates several instances in each file. Which may be a mass overhead. We can use the key word <strong>extern</strong> to declare a class to prevent from such overhead.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">extern</span> <span class=\"token keyword\">template</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Blob</span><span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\t\t\t\t<span class=\"token comment\">//declaration</span>\n<span class=\"token keyword\">template</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//definition</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//in this case, compiler will instantiates the whole members</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//thus the type must apply to every member</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\tBlob<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span> sa1<span class=\"token punctuation\">,</span> sa2<span class=\"token punctuation\">;</span> <span class=\"token comment\">//compiler instantiates class in other file</span>\n\t\t\t\t\t    <span class=\"token comment\">//Thus key word extern expresses that there is a definition in our project</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>and if we can’t make sure what the return type definitely is, we can use the tail-set return to declare function’s return type</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//using tail-set return to explicitly declare function's return type</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">It</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">auto</span> <span class=\"token function\">fcn</span><span class=\"token punctuation\">(</span>It beg<span class=\"token punctuation\">,</span> It end<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">decltype</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>beg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">//details</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">*</span>beg<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"reference-collapsing\"><a href=\"#reference-collapsing\" class=\"headerlink\" title=\"reference collapsing:\"></a>reference collapsing:</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>X&amp; &amp;, X&amp; &amp;&amp;, X&amp;&amp; &amp; will collapse to X&amp;</p>\n<p>X&amp;&amp; &amp;&amp; will be collapse to X&amp;&amp;</p></blockquote>\n<p>By define a parameter as an rvalue reference, we can save all of argument’s type-info. By using reference, we can save the const-info. By define parameters as rvalue references, we can use reference collapsing to save arguments’ reference characteristic.</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">F</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span> <span class=\"token class-name\">T2</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">flip</span><span class=\"token punctuation\">(</span>F f<span class=\"token punctuation\">,</span> T1 <span class=\"token operator\">&amp;&amp;</span>t1<span class=\"token punctuation\">,</span> T2 <span class=\"token operator\">&amp;&amp;</span>t2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">f</span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>However, function expression returns an lvalue, which restrict us from binding an rvalue reference to an rvalue reference. In this case, we need to use the lib function <strong>std::forward</strong>, which is defined in lib <em>utility</em>, to save the reference type(by using the reference collapsing). Thus, we modifies the original code to the below one</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">F</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span> <span class=\"token class-name\">T2</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">flip</span><span class=\"token punctuation\">(</span>F f<span class=\"token punctuation\">,</span> T1 <span class=\"token operator\">&amp;&amp;</span>t1<span class=\"token punctuation\">,</span> T2 <span class=\"token operator\">&amp;&amp;</span>t2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">f</span><span class=\"token punctuation\">(</span>std<span class=\"token double-colon punctuation\">::</span><span class=\"token generic-function\"><span class=\"token function\">forward</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>T1<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>t1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> std<span class=\"token double-colon punctuation\">::</span><span class=\"token generic-function\"><span class=\"token function\">forward</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>T2<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>t2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>When we overload a template function, compiler will chose the more specialized one. Thus if we define a template function</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> string <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>T <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span> string <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>T <span class=\"token operator\">*</span>a<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">/*details*/</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>and we hope the compiler may cope with <em>char</em> &amp; <em>const char</em> as <em>string</em>, we need to define two specialized overloaded function</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">string <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> string<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//declare a string type instance to avoid from default call </span>\nstring <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>p<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\nstring <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>p<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"parameter-packet\"><a href=\"#parameter-packet\" class=\"headerlink\" title=\"parameter packet\"></a>parameter packet</h3><p>we use symbol <strong>…</strong> after keyword <em>typename</em> or <em>class</em> to express indefinite number of parameters</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//Args is a template parameter packet, rest is a function parameter packet</span>\n<span class=\"token comment\">//Args means zero or several template parameters</span>\n<span class=\"token comment\">//rest means zero or several function parameters</span>\n<span class=\"token comment\">//types in packet can be different from each other</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> Args<span class=\"token operator\">></span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> T <span class=\"token operator\">&amp;</span>t<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> Args<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    cout<span class=\"token operator\">&lt;&lt;</span>T<span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>cout<span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>we can use <strong>sizeof</strong> to calculate the number of parameters in the packet</p>\n<p><strong>call packet parameters</strong>:</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//end the recursion and print the last element</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span>\nostream <span class=\"token operator\">&amp;</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>ostream <span class=\"token operator\">&amp;</span>os<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T <span class=\"token operator\">&amp;</span>t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> os <span class=\"token operator\">&lt;&lt;</span> t<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//recursion call</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> Args<span class=\"token operator\">></span>\nostream <span class=\"token operator\">&amp;</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>ostream <span class=\"token operator\">&amp;</span>os<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T <span class=\"token operator\">&amp;</span>t<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> Args<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> rest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\tos <span class=\"token operator\">&lt;&lt;</span> t <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">double</span> d <span class=\"token operator\">=</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">long</span> l <span class=\"token operator\">=</span> <span class=\"token number\">321</span><span class=\"token punctuation\">;</span>\n\tstring s <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>cout<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> l<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//output:1       2       321     hello world!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"specialize\"><a href=\"#specialize\" class=\"headerlink\" title=\"specialize\"></a>specialize</h3><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//specialize</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> T <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> T <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span>size_t N<span class=\"token punctuation\">,</span> size_t M<span class=\"token operator\">></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>N<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>M<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//const char(&amp;)[M] is a reference to an char array</span>\n\n<span class=\"token comment\">//a specialized instance of function compare</span>\n<span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token keyword\">const</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token keyword\">const</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//a reference to an const (or not) pointer</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>notice</strong>: Once we need a specialized instance but forget to declare or define one, where there is a template suits to this instance’s type, the compiler will instantiate an instance. This mistake won’t be checked up. Thus we are supposed to define templates with the same name in the same header file. And put the specialized instances after those template. Certainly we need to check up whether we have declared an instance or not.</p>\n","text":"C++ learning notesGeneric algorithmlambda[capture list] (parameter list) -&gt; return type {function body} we can ignore the parameter list ...","link":"","photos":[],"count_time":{"symbolsCount":"30k","symbolsTime":"27 mins."},"categories":[{"name":"技术笔记","slug":"技术笔记","count":6,"path":"api/categories/技术笔记.json"},{"name":"Computer Science","slug":"技术笔记/Computer-Science","count":1,"path":"api/categories/技术笔记/Computer-Science.json"}],"tags":[{"name":"C++","slug":"C","count":3,"path":"api/tags/C.json"},{"name":"notes","slug":"notes","count":2,"path":"api/tags/notes.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#C-learning-notes\"><span class=\"toc-text\">C++ learning notes</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Generic-algorithm\"><span class=\"toc-text\">Generic algorithm</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lambda\"><span class=\"toc-text\">lambda</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#dynamic-memory\"><span class=\"toc-text\">dynamic memory</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#shared-ptr-lt-gt\"><span class=\"toc-text\">shared_ptr&lt;&gt;</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#unique-ptr-lt-gt\"><span class=\"toc-text\">unique_ptr&lt;&gt;</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#weak-ptr-lt-gt\"><span class=\"toc-text\">weak_ptr&lt;&gt;</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#allocator\"><span class=\"toc-text\">allocator</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Copy-Assign-and-Destroy\"><span class=\"toc-text\">Copy, Assign and Destroy</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#specific-member-function-to-control-above-three-operations\"><span class=\"toc-text\">specific member function to control above three operations</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#copy-constructor\"><span class=\"toc-text\">copy constructor</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#copy-assignment-constructor\"><span class=\"toc-text\">copy-assignment constructor</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#stop-the-copy\"><span class=\"toc-text\">stop the copy</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#destructor\"><span class=\"toc-text\">destructor</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#principle\"><span class=\"toc-text\">principle</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#copy-control-and-resource-management\"><span class=\"toc-text\">copy control and resource management</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#classes-which-behave-like-a-value\"><span class=\"toc-text\">classes which behave like a value</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#classes-which-behave-like-a-pointer\"><span class=\"toc-text\">classes which behave like a pointer</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#swap\"><span class=\"toc-text\">swap</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#move-constructor\"><span class=\"toc-text\">move constructor</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#move-assignment-constructor\"><span class=\"toc-text\">move assignment constructor</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#reference-qualifier\"><span class=\"toc-text\">reference qualifier</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#overloading-and-type-conversion\"><span class=\"toc-text\">overloading and type conversion</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#basic-concept\"><span class=\"toc-text\">basic concept</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#operators\"><span class=\"toc-text\">operators</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#function-table\"><span class=\"toc-text\">function table</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Object-Oriented-Programming\"><span class=\"toc-text\">Object-Oriented Programming</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#inheritance\"><span class=\"toc-text\">inheritance</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#scope\"><span class=\"toc-text\">scope</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#dynamic-binding\"><span class=\"toc-text\">dynamic binding</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#template\"><span class=\"toc-text\">template</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#friend-declaration\"><span class=\"toc-text\">friend declaration</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#reference-collapsing\"><span class=\"toc-text\">reference collapsing:</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#parameter-packet\"><span class=\"toc-text\">parameter packet</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#specialize\"><span class=\"toc-text\">specialize</span></a></li></ol></li></ol></li></ol>","author":{"name":"江子扬","slug":"blog-author","avatar":"https://res.cloudinary.com/dwy9slegd/image/upload/v1662327765/66617421_abqsge.jpg","link":"/","description":"我的肩上是风，风上是闪烁的星群","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://pbs.twimg.com/profile_images/1414990564408262661/r6YemvF9_400x400.jpg","link":"https://github.com/JiangZiyang0120"}}}},"mapped":true,"prev_post":{"title":"链接器查找范围","uid":"e0cdb893697957606acb0218b6567b0c","slug":"链接器查找范围","date":"2021-07-08T20:00:00.000Z","updated":"2022-09-04T17:24:36.618Z","comments":true,"path":"api/articles/链接器查找范围.json","keywords":null,"cover":null,"text":"解决Visual Studio的 LNK2019 和 LNK1120 错误问题描述写了一个 text searching 的代码。该代码设计了数个类，并有一个 interface class 通过指向 base class 的 shared_ptr 通过 dynamic bind...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"技术笔记","slug":"技术笔记","count":6,"path":"api/categories/技术笔记.json"},{"name":"coding过程中踩过的坑","slug":"技术笔记/coding过程中踩过的坑","count":2,"path":"api/categories/技术笔记/coding过程中踩过的坑.json"}],"tags":[{"name":"C++","slug":"C","count":3,"path":"api/tags/C.json"},{"name":"debug","slug":"debug","count":2,"path":"api/tags/debug.json"}],"author":{"name":"江子扬","slug":"blog-author","avatar":"https://res.cloudinary.com/dwy9slegd/image/upload/v1662327765/66617421_abqsge.jpg","link":"/","description":"我的肩上是风，风上是闪烁的星群","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"https://pbs.twimg.com/profile_images/1414990564408262661/r6YemvF9_400x400.jpg","link":"https://github.com/JiangZiyang0120"}}}}},"next_post":{}}